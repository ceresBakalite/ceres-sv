/**
 * @license
 * ceres-sv v1.0.0
 *
 * Minified using terser v5.4.0
 * Original file: ceresbakalite/ceres-sv/repos/csvjs/ceres-sv.js
 *
 * ceresBakalite/ceres-sv is licensed under the MIT License - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2020 Alexander Munro
*/
const t={};(function(){const e='ceres-sv',i={};(function(){this.srcOpen=function(t){window.open(t.element.getAttribute('src'),t.type)},this.isString=function(t){return'[object String]'==Object.prototype.toString.call(t)},this.clearElement=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},this.composeElement=function(t,e){if(!t.type)return;const i=this.attrib.tag.includes(t.type.trim().toUpperCase())?document.head:t.parent||document.body,r=document.createElement(t.type);Object.entries(e).forEach((([t,e])=>{r.setAttribute(t,e)})),t.markup&&r.insertAdjacentHTML('afterbegin',t.markup),i.appendChild(r)},this.setHorizontalSwipe=function(t,e,i){t.act||(t.act=80),t.node.addEventListener('touchstart',(e=>{t.start=e.changedTouches[0].screenX}),{passive:!0}),t.node.addEventListener('touchmove',(t=>{t.preventDefault()}),{passive:!0}),t.node.addEventListener('touchend',(r=>{t.end=r.changedTouches[0].screenX,Math.abs(t.start-t.end)>t.act&&(i.action=t.start>t.end,e.call(this,i))}),{passive:!0})},this.isEmptyOrNull=function(t){return null===t||'undefined'==t||(this.isString(t)?0===t.length||!t.trim():Array.isArray(t)?0===t.length:t&&t.constructor===Object?0===Object.keys(t).length:!t)},this.getBooleanAttribute=function(t){return!0===t||!1===t?atr:!(this.isEmptyOrNull(t)||!this.isString(t))&&this.attrib.bool.includes(t.trim().toUpperCase())},this.getUniqueElementId=function(t={}){t.name||(t.name='n'),t.range||(t.range=100);for(;document.getElementById(t.el=t.name+Math.floor(Math.random()*t.range)););return t.el},this.removeDuplcates=function(t,e){const i=JSON.stringify;let r=[...new Map(t.map((t=>[i(t),t]))).values()];return e?r.sort(((t,e)=>t-e)):r},this.parseText=function(t){if(this.isEmptyOrNull(t.text))return;if(t.regex||t.text.includes('</template>'))return t.text.replace(this.attrib.markup,'');let e=(new DOMParser).parseFromString(t.text,'text/html');return e.body.textContent||e.body.innerText},this.inspect=function(t){const e=function(t){let e=t.notification+' [ DateTime: '+(new Date).toLocaleString()+' ]';console.error(e),t.alert&&alert(e)},i={[this.attrib.notify]:function(){t.logtrace&&console.info(t.notification)},[this.attrib.warn]:function(){t.logtrace&&console.warn(t.notification)},[this.attrib.reference]:function(){t.logtrace&&console.log('Reference: '+this.attrib.newline+this.attrib.newline+t.reference)},[this.attrib.error]:function(){e({notification:t.notification,alert:t.logtrace})},[this.attrib.default]:function(){e({notification:'Unhandled exception'})}};i[t.type]()||i[this.attrib.default]},this.getObjectProperties=function(t={},e=''){for(let i in t)e+=i+': '+t[i]+', ';return e.replace(/, +$/g,'')},this.attrib={reference:1,notify:2,warn:3,default:98,error:99,bArray:['true','1','enable','confirm','grant','active','on','yes'],tagName:['link','script','style'],isWindows:-1!=navigator.appVersion.indexOf('Win'),nonWordChars:'/()"\':,.;<>~!@#$%^&*|+=[]{}`?-â€¦',whitespace:/\s/g,markup:/(<([^>]+)>)/gi,get newline(){return this.isWindows?'\r\n':'\n'},get bool(){return this.bArray.map((t=>t.trim().toUpperCase()))},get tag(){return this.tagName.map((t=>t.trim().toUpperCase()))},get metaUrl(){return import.meta.url}}}).call(i),window.customElements.get(e)||window.customElements.define(e,class extends HTMLElement{async connectedCallback(){t.getImage=function(t){i.srcOpen({element:t,type:'image'})},t.getSlide=function(t){a.setSlide(t)};const r=this,n={},a={};r.src=r.getAttribute('src'),n.defaultCSS='https://ceresbakalite.github.io/ceres-sv/prod/ceres-sv.min.css',n.src=i.isEmptyOrNull(r.src)?null:r.src.trim(),n.css=r.getAttribute('css')||n.defaultCSS,n.fetchsrc=!i.isEmptyOrNull(n.src),n.attrib={},n.slide=1,function(){const t=function(t){return!n.attrib.nub||n.attrib.static?t:t+=' none'},s=new Map,o={imageMarkup:'Image list markup ',configAttributes:'The element attributes ',templateSearch:'The '+e+' src attribute url is unavailable. Searching for the fallback template element in the document body',elementSearch:'There is no \'embed\' elementId available. Looking for the first occurance of a <template> or <noscript> tagname',precursorError:'Error: Unable to find the '+e+' document element',fetchListError:'Error: Unable to find either the fetch '+e+' nor the fallback template elements',templateError:'Error: Unable to find the fallback template element when searching the document body',cacheWarning:'Warning: cache response status '};Object.freeze(o),this.setShadow=function(){n.shade=document.querySelector('#'+r.id),i.clearElement(n.shade),n.shade.attachShadow({mode:'open'}),n.shadow=n.shade.shadowRoot,this.setStyleAttributes(),this.setBodyAttributes(),this.setImageAttributes(),this.setTrackAttributes(),n.shadow.append(n.styleContainer),n.shadow.append(n.bodyContainer),n.attrib.static&&i.setHorizontalSwipe({node:n.shadow.querySelector('div.slideview-body > div.slideview-image')},a.getSwipeCallback,{left:-1,right:1}),i.inspect({type:i.attrib.notify,notification:n.shade,logtrace:n.attrib.trace})},this.setSlide=function(t,e){i.isEmptyOrNull(e)&&(e=i.isEmptyOrNull(t)?n.shadow:this.getShadow(t));const r=e.querySelectorAll('div.slideview-image > div.view');n.slide=n.slide<1?r.length:n.slide>r.length?1:n.slide;const a=n.slide-1;if(i.isEmptyOrNull(r[a]))return;const s=e.querySelector('div.slideview-image > div.active');s&&(s.className=s.className.replace('active','none')),r[a].className=r[a].className.replace('none','active');const o=e.querySelector('div.slideview-nub > span.enabled');o&&(o.className='nub'),e.querySelectorAll('div.slideview-nub > span.nub')[a].className='nub enabled'},this.setAuto=function(){const t=n.attrib.autocancel&&n.attrib.autocycle>-1?n.imageArray.length*n.attrib.autocycle:0;let e=0===t?0:1,i=setInterval((function(){(n.attrib.autocancel?e===t||(n.slide++,e++,0):(n.slide++,0))&&clearInterval(i),a.setSlide()}),n.attrib.autopause)},this.setView=function(){setTimeout((function(){n.bodyContainer.style.display='block',n.attrib.static||setTimeout((function(){a.setAuto()}),n.attrib.delay)}),n.attrib.delay),n.attrib.cache&&this.insertCache()},this.hasProperties=function(){return this.getPrecursor()?n.fetchsrc||n.template?this.attributesExist():i.inspect({type:i.attrib.error,notification:o.fetchListError}):i.inspect({type:i.attrib.error,notification:o.precursorError})},this.activate=function(){this.setShadow(),this.setSlide(),this.setView()},this.setStyleAttributes=function(){n.styleContainer=document.createElement('style'),n.styleContainer.id=e+'-style',n.styleContainer.className='slideview-style',n.shade.appendChild(n.styleContainer),n.cachecss=i.removeDuplcates(n.css.trim().replace(/,/gi,';').replace(/;+$/g,'').replace(/[^\x00-\xFF]| /g,'').split(';')),n.cachecss.forEach((t=>{fetch(t).then((t=>t.text())).then((t=>{n.styleContainer.insertAdjacentHTML('beforeend',t)}))}))},this.setBodyAttributes=function(){n.bodyContainer=document.createElement('div'),n.bodyContainer.id=e+'-body',n.bodyContainer.className='slideview-body',n.bodyContainer.style.display='none',n.shade.appendChild(n.bodyContainer)},this.setImageAttributes=function(r=0){const a=function(){return i.isEmptyOrNull(c[1])?null:c[1].trim()},s=function(t='view'){return n.attrib.zoom&&(t+=' zoom'),n.attrib.fade&&(t+=' fade'),t+' none'}(),o=document.createElement('div');o.id=e+'-image',o.className='slideview-image',n.bodyContainer.appendChild(o);for(let t=0;t<n.imageArray.length;t++){var c=n.imageArray[t].split(',');let e=document.createElement('div');e.id='img'+ ++r,e.className=s,o.appendChild(e),n.attrib.sur&&i.composeElement({type:'div',parent:e,markup:n.attrib.sur?r+' / '+n.imageArray.length:null},{class:'surtitle'}),i.composeElement({type:'img',parent:e},{class:'slide',onclick:n.attrib.zoom?'ceres.getImage(this);':'javascript:void(0);',src:i.isEmptyOrNull(c[0])?null:c[0].trim(),alt:a()}),n.attrib.sub&&i.composeElement({type:'div',parent:e,markup:n.attrib.sub?a():null},{class:'subtitle'})}i.composeElement({type:'a',parent:o,markup:'&#10094;'},{class:t('left'),onclick:'ceres.getSlide(this)'}),i.composeElement({type:'a',parent:o,markup:'&#10095;'},{class:t('right'),onclick:'ceres.getSlide(this)'})},this.setTrackAttributes=function(r=0){const a=document.createElement('div');a.id=e+'-nub',a.className=t('slideview-nub'),n.bodyContainer.appendChild(a);for(let t=0;t<n.imageArray.length;t++)i.composeElement({type:'span',parent:a},{id:'nub'+ ++r,class:'nub',onclick:'ceres.getSlide(this)'})},this.parseJSON=function(t,e=''){return'.json'!=n.src.substring(n.src.lastIndexOf('.'),n.src.length)?t:(JSON.parse(t).forEach((t=>{e+=t.url+', '+t.text+'\n'})),e)},this.insertCache=function(){'caches'in window&&(n.cachesrc=n.fetchsrc?n.src.split():Array.from(''),i.removeDuplcates(n.cachesrc.concat(n.cachecss.concat([i.attrib.metaUrl]))).forEach((t=>{fetch(t).then((e=>(e.ok||i.inspect({type:i.attrib.warn,notification:o.cacheWarning+'['+e.status+'] - '+t,logtrace:n.attrib.trace}),caches.open('ceres-sv-cache').then((i=>i.put(t,e))))))})))},this.getSwipeCallback=function(t){const e=t.action?t.right:t.left;n.slide=n.slide+=e,a.setSlide(null,n.shadow)},this.getShadow=function(t){const e=t.getRootNode().host,i=document.querySelector('#'+e.id).shadowRoot,r=i.querySelector('div.slideview-image > div.active');return n.slide=Number.parseInt(r.id.replace('img',''),10),s.set('left',n.slide-1),s.set('right',n.slide+1),s.set('nub',Number.parseInt(t.id.replace('nub',''),10)),n.slide=s.get(t.className),i},this.getPrecursor=function(){const t=!i.isEmptyOrNull(r);return t&&(r.id=i.getUniqueElementId({name:e,range:1e3}),r.setAttribute('class','none'),n.attrib.delay=Number.isInteger(parseInt(r.getAttribute('delay')))?parseInt(r.getAttribute('delay')):250,n.attrib.sur=i.getBooleanAttribute(r.getAttribute('sur')),n.attrib.sub=i.getBooleanAttribute(r.getAttribute('sub')),n.attrib.trace=i.getBooleanAttribute(r.getAttribute('trace')),n.attrib.cache=!i.getBooleanAttribute(r.getAttribute('cache')),n.attrib.fade=!i.getBooleanAttribute(r.getAttribute('fade')),n.attrib.nub=!i.getBooleanAttribute(r.getAttribute('nub')),n.attrib.zoom=function(){let t=r.getAttribute('zoom');return!!i.isEmptyOrNull(t)||i.getBooleanAttribute(t)}(),n.attrib.static=function(){let t=r.getAttribute('auto');if(i.isEmptyOrNull(t))return!0;let e=t.replace(i.attrib.whitespace,'').split(','),a=e[0];if(!Number.isInteger(parseInt(a))){if(!i.getBooleanAttribute(a))return!0;e.length>1&&e.shift()}return n.attrib.autocycle=Number.isInteger(parseInt(e[0]))?parseInt(e[0]):10,n.attrib.autopause=Number.isInteger(parseInt(e[1]))?parseInt(e[1]):3e3,n.attrib.autocancel=n.attrib.autocycle>-1,n.attrib.fade=n.attrib.autopause>400,n.attrib.nub='false',!1}(),n.attrib.embed=function(){let t=r.getAttribute('embed');return!i.isEmptyOrNull(t)&&t}(),Object.freeze(n.attrib),n.template=function(){if(n.fetchsrc)return'undefined';let t=n.attrib.embed?document.getElementById(n.attrib.embed):null;return i.isEmptyOrNull(t)&&(i.inspect({type:i.attrib.notify,notification:o.elementSearch,logtrace:n.attrib.trace}),t=document.getElementsByTagName('template')[0]||document.getElementsByTagName('noscript')[0]),i.isEmptyOrNull(t)?'undefined':t}()),t},this.attributesExist=function(){return n.imageArray=null,i.inspect({type:i.attrib.notify,notification:o.configAttributes+'['+r.id+'] '+i.getObjectProperties(n.attrib),logtrace:n.attrib.trace}),function(){let t=n.fetchsrc?function(){let t=r.textContent;return i.isEmptyOrNull(t)?null:t}():function(){i.inspect({type:i.attrib.notify,notification:o.templateSearch,logtrace:n.attrib.trace});let t='TEMPLATE'==n.template.tagName?n.template.content.textContent:n.template.textContent;return i.isEmptyOrNull(t)?i.inspect({type:i.attrib.error,notification:o.templateError+' ['+n.attrib.embed+']'}):t}();return i.isEmptyOrNull(t)||(i.inspect({type:i.attrib.notify,notification:o.imageMarkup+'['+(n.fetchsrc?r.id+' - fetch':n.attrib.embed+' - template')+']'+i.attrib.newline+t,logtrace:n.attrib.trace}),n.imageArray=t?t.trim().replace(/\r\n|\r|\n/gi,';').split(';'):null),!i.isEmptyOrNull(n.imageArray)}()},Object.seal(a)}.call(a),n.fetchsrc&&r.insertAdjacentHTML('afterbegin',i.parseText({text:a.parseJSON(await(await fetch(n.src)).text())})),a.hasProperties()&&a.activate()}})}).call(t);