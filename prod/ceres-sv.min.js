/**
 * @license
 * ceres-sv v1.0.0
 *
 * Minified using terser v5.5.1
 * Original file: ceresbakalite/ceres-sv/repos/csvjs/ceres-sv.js
 *
 * ceresBakalite/ceres-sv is licensed under the MIT License - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2018 - 2020 Alexander Munro
*/
window.ceres={},(()=>{function e(){(function(){this.reference=1,this.notify=2,this.warn=3,this.default=98,this.error=99,this.bArray=['true','1','enable','confirm','grant','active','on','yes'],this.isWindows=-1!=navigator.appVersion.indexOf('Win'),this.clearElement=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},this.fileName=e=>e.substring(e.lastIndexOf('/')+1,e.length),this.fileType=(e,t)=>e.substring(e.lastIndexOf('.')+1,e.length).toUpperCase()===t.toUpperCase(),this.srcOpen=e=>window.open(e.element.getAttribute('src'),e.type),this.isString=e=>'[object String]'==Object.prototype.toString.call(e),this.newline=this.isWindows?'\r\n':'\n',this.bool=this.bArray.map((e=>e.trim().toUpperCase())),this.composeElement=(e,t)=>{if(this.ignore(e.type))return;const n=['LINK','SCRIPT','STYLE'].includes(e.type.trim().toUpperCase())?document.head:e.parent||document.body,o=document.createElement(e.type);Object.entries(t).forEach((([e,t])=>{o.setAttribute(e,t)})),e.markup&&o.insertAdjacentHTML('afterbegin',e.markup),n.appendChild(o)},this.setSwipe=(e,t,n)=>{e.act||(e.act=80),e.node.addEventListener('touchstart',(t=>{e.start=t.changedTouches[0].screenX}),{passive:!0}),e.node.addEventListener('touchmove',(e=>{e.preventDefault()}),{passive:!0}),e.node.addEventListener('touchend',(o=>{e.end=o.changedTouches[0].screenX,Math.abs(e.start-e.end)>e.act&&(n.action=e.start>e.end,t.call(this,n))}),{passive:!0})},this.ignore=e=>null===e||'undefined'==e||(this.isString(e)?0===e.length||!e.trim():Array.isArray(e)?0===e.length:e&&e.constructor===Object?0===Object.keys(e).length:!e),this.getBoolean=e=>!0===e||!1===e?atr:!(this.ignore(e)||!this.isString(e))&&this.bool.includes(e.trim().toUpperCase()),this.getUniqueId=e=>{e.name||(e.name='n'),e.range||(e.range=100);for(;document.getElementById(e.el=e.name+Math.floor(Math.random()*e.range)););return e.el},this.removeDuplcates=(e,t)=>{const n=JSON.stringify,o=[...new Map(e.map((e=>[n(e),e]))).values()];return t?o.sort(((e,t)=>e-t)):o},this.softSanitize=(e,t='text/html')=>this.ignore(e)?null:(new DOMParser).parseFromString(e,t).documentElement.textContent.replace(/</g,'&lt;'),this.inspect=e=>{const t=e=>{const t=e.notification+' [ DateTime: '+(new Date).toLocaleString()+' ]';console.error(t),e.alert&&alert(t)},n={[this.notify]:()=>{e.logtrace&&console.info(e.notification)},[this.warn]:()=>{e.logtrace&&console.warn(e.notification)},[this.reference]:()=>{e.logtrace&&console.log('Reference: '+this.newline+this.newline+e.reference)},[this.error]:()=>t({notification:e.notification,alert:e.logtrace}),[this.default]:()=>t({notification:'Unhandled exception'})};n[e.type]()||n[this.default]},this.getProperties=(e={},t='')=>{for(let n in e)t+=n+': '+e[n]+', ';return t.replace(/, +$/g,'')}}).call(rsc)}window,document,window.customElements.define('ceres-sv',class extends HTMLElement{async connectedCallback(){const t={initialise:e()};t.initialise(),ceres.getImage=e=>t.srcOpen({element:e,type:'image'}),ceres.getSlide=e=>o.get.slide({node:e});const n={},o={};var s;(s=this).src=s.getAttribute('src'),n.defaultCSS='https://ceresbakalite.github.io/ceres-sv/prod/ceres-sv.min.css',n.src=t.ignore(s.src)?null:s.src.trim(),n.css=s.getAttribute('css')||n.defaultCSS,n.srcRoot=!t.ignore(n.src),n.commaCodes=/,|&comma;|&#x2c;|&#44;|U+0002C/g,n.commaSymbol='_&c',n.shadowStyle='',n.node={},n.slide=1,n.cssRoot=t.removeDuplcates(n.css.trim().replace(/,/gi,';').replace(/;+$/g,'').replace(/[^\x00-\xFF]| /g,'').split(';')),function(){const e=s.tagName.toLocaleLowerCase(),a=new Map,i={markup:'Image list markup ',element:'The element attributes ',tagSearch:'The '+e+' src attribute url is unavailable and there is no \'local\' elementId. Looking for the first occurance of a <template> or <noscript> tagname',properties:'Error: Unable to find the '+e+' document element',list:'Error: Unable to find either the '+e+' document element nor the fallback local template elements',template:'Error: Unable to find the local fallback template element when searching the document body',cache:'Warning: cache response status '};Object.freeze(i),this.instance={hasContent:()=>this.content.properties()?this.content.textList()?this.content.textArray():t.inspect({type:t.error,notification:i.list}):t.inspect({type:t.error,notification:i.properties}),showContent:()=>{this.get.shadow(),this.get.slide({shadow:n.shadow}),this.get.view()}},this.content={properties:()=>{const o=['color','font','padding','top','bottom'],a=['sub','sur'];return(()=>{if(t.ignore(s))return!1;s.id=t.getUniqueId({name:e,range:1e3});const r=e=>{const i=s.getAttribute(e),r={nub:!t.getBoolean(i),fade:!t.getBoolean(i),cache:!t.getBoolean(i),trace:t.getBoolean(i),loading:i||'auto',local:i||!1,zoom:!!t.ignore(i)||t.getBoolean(i),delay:Number.isInteger(parseInt(i,10))?parseInt(i,10):250};if(r.hasOwnProperty(e))return r[e];if(t.ignore(i))return!1;const l=i.replace(/\s+:\s+/g,':').split(',').map((e=>e.trim())),c='sur'!=e?/.subtitle[^&]*?}/i:/.surtitle[^&]*?}/i,d=l[0];if(!Number.isInteger(parseInt(d))){if(!t.getBoolean(d))return!1;l.length>1&&l.shift()}return'auto'==e?(n.node.autocycle=Number.isInteger(parseInt(l[0]))?parseInt(l[0]):10,n.node.autopause=Number.isInteger(parseInt(l[1]))?parseInt(l[1]):3e3,n.node.autocancel=n.node.autocycle>-1,n.node.fade=n.node.autopause>400,n.node.nub='false',!0):(a.includes(e)&&(0!=l.length&&l.forEach((e=>{o.includes(e.split(':')[0])&&(e=>{const o=Boolean(e.match(/color:/i))?/color[^&]*?;/i:Boolean(e.match(/font:/i))?/font[^&]*?;/i:Boolean(e.match(/padding:/i))?/padding[^&]*?;/i:Boolean(e.match(/top:/i))?/top[^&]*?;/i:Boolean(e.match(/bottom:/i))?/bottom[^&]*?;/i:null;if(!t.ignore(o)){const t=String(n.shadowStyle.match(c));if(t){const s=t.replace(o,e.replace(/(\s+)?:(\s+)?/g,':')+';');s&&(n.shadowStyle=n.shadowStyle.replace(t,s))}}})(e)}))),!0)};return n.node.nub=r('nub'),n.node.fade=r('fade'),n.node.cache=r('cache'),n.node.trace=r('trace'),n.node.loading=r('loading'),n.node.local=r('local'),n.node.zoom=r('zoom'),n.node.delay=r('delay'),n.node.sur=r('sur'),n.node.sub=r('sub'),n.node.auto=r('auto'),Object.freeze(n.node),n.template=(()=>{if(n.srcRoot)return'undefined';let e=document.getElementById(n.node.local)||null;return t.ignore(e)&&(t.inspect({type:t.notify,notification:i.tagSearch,logtrace:n.node.trace}),e=document.getElementsByTagName('template')[0]||document.getElementsByTagName('noscript')[0]),e||'undefined'})(),!0})()},textList:()=>n.srcRoot||n.template,textArray:()=>{n.imageArray=null,t.inspect({type:t.notify,notification:i.element+'['+s.id+'] '+t.getProperties(n.node),logtrace:n.node.trace});const e=()=>n.srcRoot?s.textContent.replace(/\s*\n\s*/g,'\n')||null:(()=>{const e='TEMPLATE'!=n.template.tagName?n.template.textContent:n.template.content.textContent;return t.ignore(e)?t.inspect({type:t.error,notification:i.template+' ['+n.node.local+']'}):this.parseText(e).replace(/\s*\n\s*/g,'\n')})();return(()=>{const o=e();return!t.ignore(o)&&(t.inspect({type:t.notify,notification:i.markup+'['+(n.srcRoot?s.id+' - '+t.fileName(n.src):n.node.local+' - local template')+']'+t.newline+o.replaceAll(n.commaSymbol,'&comma;').replace(/&lt;/g,'<').replace(/&gt;/g,'>'),logtrace:n.node.trace}),n.imageArray=o?o.trim().split('\n'):null,!t.ignore(n.imageArray))})()}},this.get={shadow:()=>{const e=document.querySelector('#'+s.id);t.clearElement(e),e.attachShadow({mode:'open'}),n.shadow=e.shadowRoot,this.compose.style(),this.compose.body(),n.node.auto||t.setSwipe({node:n.shadow.querySelector('div.slideview-body > div.slideview-image')},(e=>{const t=e.action?e.right:e.left;n.slide=n.slide+=t,this.get.slide({shadow:n.shadow})}),{left:-1,right:1})},slide:e=>{t.ignore(e.shadow)&&(e.shadow=t.ignore(e.node)?n.shadow:(e=>{const t=e.getRootNode().host,o=document.querySelector('#'+t.id).shadowRoot,s=o.querySelector('div.slideview-image > div.active');return n.slide=Number.parseInt(s.id.replace('img',''),10),a.set('left',n.slide-1),a.set('right',n.slide+1),a.set('nub',Number.parseInt(e.id.replace('nub',''),10)),n.slide=a.get(e.className),o})(e.node));const o=e.shadow.querySelectorAll('div.slideview-image > div.slide');n.slide=t.ignore(e.autoslide)?n.slide<1?o.length:n.slide>o.length?1:n.slide:e.autoslide;const s=n.slide-1;if(t.ignore(o[s]))return;const i=e.shadow.querySelector('div.slideview-image > div.active');i&&i.classList.replace('active','none'),o[s].classList.replace('none','active');const r=e.shadow.querySelector('div.slideview-nub > span.enabled');r&&(r.className='nub'),e.shadow.querySelectorAll('div.slideview-nub > span.nub')[s].className='nub enabled'},view:()=>{const s=()=>{const e=n.shadow.querySelectorAll('div.slideview-image > div.slide'),t=n.node.autocancel&&n.node.autocycle>-1?n.imageArray.length*n.node.autocycle:0;let s=0,a=1;const i=setInterval((()=>{a=a<1?e.length:a>e.length?1:a,(n.node.autocancel?s===t||(a++,s++,0):(a++,0))&&clearInterval(i),o.get.slide({autoslide:a-1})}),n.node.autopause)};setTimeout((()=>{n.node.auto&&setTimeout((()=>{s()}),n.node.delay),o.setDisplay.show()}),n.node.delay),n.node.cache&&(()=>{if(!window.hasOwnProperty('caches'))return;const o=n.srcRoot?n.src.split():Array.from(''),s=e+'-cache';t.removeDuplcates(o.concat(n.cssRoot.concat([import.meta.url]))).forEach((e=>{fetch(e).then((o=>(o.ok||t.inspect({type:t.warn,notification:i.cache+'['+o.status+'] - '+e,logtrace:n.node.trace}),caches.open(s).then((t=>t.put(e,o))))))}))})(),t.inspect({type:t.notify,notification:n.shadow,logtrace:n.node.trace})}},this.compose={style:()=>{const e=document.createElement('style');e.className='slideview-style',e.insertAdjacentHTML('beforeend',n.shadowStyle),n.shadow.appendChild(e)},body:()=>{const e=()=>t.ignore(d.ar[1])?null:d.ar[1].trim().replaceAll(n.commaSymbol,','),o=()=>t.ignore(d.ar[2])?d.index+' / '+n.imageArray.length:d.ar[2].trim().replaceAll(n.commaSymbol,','),s=this.getClassList('slide'),a=n.node.zoom?'ceres.getImage(this);':'javascript:void(0);',i='ceres.getSlide(this)',r=document.createElement('div');r.className='slideview-body';const l=document.createElement('div');l.className='slideview-image',r.appendChild(l);const c=document.createElement('div');c.className=this.getClassList('slideview-nub'),r.appendChild(c);const d={index:0,ar:[]};for(let i in n.imageArray){d.ar=n.imageArray[i].split(',');const r=document.createElement('div');r.className=s,r.id='img'+ ++d.index,l.appendChild(r),n.node.sur&&t.composeElement({type:'div',parent:r,markup:n.node.sur?o():null},{class:'surtitle fade'}),t.composeElement({type:'img',parent:r},{class:'slide',onclick:a,src:t.ignore(d.ar[0])?null:d.ar[0].trim(),alt:e(),loading:Boolean(n.node.loading.match(/lazy|eager|auto/i))?n.node.loading:'auto'}),n.node.sub&&t.composeElement({type:'div',parent:r,markup:n.node.sub?e():null},{class:'subtitle fade'})}t.composeElement({type:'a',parent:l,markup:'&#10094;'},{class:this.getClassList('left'),onclick:i}),t.composeElement({type:'a',parent:l,markup:'&#10095;'},{class:this.getClassList('right'),onclick:i}),n.imageArray.forEach(((e,n)=>{t.composeElement({type:'span',parent:c},{id:'nub'+n,class:'nub',onclick:i})})),n.shadow.appendChild(r)}},this.setDisplay={hide:()=>{s.style.visibility='hidden',s.style.display='none'},show:()=>{s.style.removeProperty('display'),s.style.removeProperty('visibility'),0===s.style.length&&s.removeAttribute('style')}},this.getClassList=e=>'slide'!=e?n.node.nub&&n.node.auto?e+=' none':e:(n.node.zoom&&(e+=' zoom'),n.node.fade&&(e+=' fade'),e+' none'),this.getFileType=e=>t.fileType(n.src,'json')?this.parseJSON(e):t.fileType(n.src,'csv')?this.parseJSON(this.parseCSV(e,{json:!0,nodes:['url','sub','sur']})):e,this.parseText=e=>t.softSanitize(e.replace(/\\,|&comma;|&#x2c;|&#44;|U+0002C/g,n.commaSymbol).replace(/^\s*?<template(.*?)>|<\/template>\s*?$/,'')),this.parseJSON=e=>{const t=JSON.parse(e);let o='';return t.forEach((e=>{o+=e.url+(e.sub?', '+e.sub.replace(n.commaCodes,n.commaSymbol):'')+(e.sur?', '+e.sur.replace(n.commaCodes,n.commaSymbol):'')+'\n'})),o},this.parseCSV=(e,o={})=>{const s=e.split('\n'),a=new Array(s.length),i='_&grp;',r=new RegExp('_&grp;s*?$','g'),l=/"[^]*?",|"[^]*?"$/gm,c=()=>{const e=/,\s*?$/;let n='';return a.forEach((s=>{t.ignore(s)||(n+='{ ',s.split(',').forEach(((e,t)=>{n+=(e=>o.nodes[e]?'"'+o.nodes[e]+'": ':'"node'+e+'1": ')(t)+'"'+e.trim().replace(/"/g,'\\"')+'", '})),n=n.replace(e,'')+' },\n')})),'['+n.replace(e,'')+']'};return s.forEach((e=>{let t=String(e);[...t.matchAll(l)].forEach((e=>{let o=(e=>{let t=String(e).replace(/"\s*?$|"\s*?,\s*?$/,'').replace(/^\s*?"/,'');return t=t.replace(/""/g,'"'),t.replace(n.commaCodes,n.commaSymbol)+i})(e);t=t.replace(e,o)})),a.push((e=>{let t=e.replace(r,'');return t=t.replaceAll(i,', '),t.replace(/(?!\s)[,](?!\s)/g,', ')})(t))})),o.json||o.nodes?c():a.join('\n')},Object.seal(o)}.call(o),o.setDisplay.hide(),n.srcRoot&&this.insertAdjacentHTML('afterbegin',o.parseText(o.getFileType(await(await fetch(n.src)).text())));for(let e of n.cssRoot)n.shadowStyle+=t.softSanitize(await(await fetch(e)).text());o.instance.hasContent()&&o.instance.showContent()}})})();