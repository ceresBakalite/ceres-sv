/**
 * @license
 * ceres-sv v1.0.0
 *
 * Minified using terser v5.4.0
 * Original file: ceresbakalite/ceres-sv/repos/csvjs/ceres-sv.js
 *
 * ceresBakalite/ceres-sv is licensed under the MIT License - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2020 Alexander Munro
*/
window.ceres={},window,document,window.customElements.define('ceres-sv',class extends HTMLElement{async connectedCallback(){ceres.getImage=function(e){n.srcOpen({element:e,type:'image'})},ceres.getSlide=function(e){n.get.slide({node:e})};const e=this,t={},n={};!function(){e.src=e.getAttribute('src'),t.defaultCSS='https://ceresbakalite.github.io/ceres-sv/prod/ceres-sv.min.css',t.src=i.ignore(e.src)?null:e.src.trim(),t.css=e.getAttribute('css')||t.defaultCSS,t.srcRoot=!i.ignore(t.src),t.cssRoot=i.removeDuplcates(t.css.trim().replace(/,/gi,';').replace(/;+$/g,'').replace(/[^\x00-\xFF]| /g,'').split(';')),t.href='ceres.getSlide(this)',t.attrib={},t.slide=1;const i={};(function(){this.isString=function(e){return'[object String]'==Object.prototype.toString.call(e)},this.clearElement=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},this.fileName=function(e){return e.substring(e.lastIndexOf('/')+1,e.length)},this.fileType=function(e,t){return e.substring(e.lastIndexOf('.'),e.length).toUpperCase()===t.toUpperCase()},this.composeElement=function(e,t){if(!e.type)return;const n=this.attrib.tagName.includes(e.type.trim().toUpperCase())?document.head:e.parent||document.body,i=document.createElement(e.type);Object.entries(t).forEach((([e,t])=>{i.setAttribute(e,t)})),e.markup&&i.insertAdjacentHTML('afterbegin',e.markup),n.appendChild(i)},this.setSwipe=function(e,t,n){e.act||(e.act=80),e.node.addEventListener('touchstart',(t=>{e.start=t.changedTouches[0].screenX}),{passive:!0}),e.node.addEventListener('touchmove',(e=>{e.preventDefault()}),{passive:!0}),e.node.addEventListener('touchend',(i=>{e.end=i.changedTouches[0].screenX,Math.abs(e.start-e.end)>e.act&&(n.action=e.start>e.end,t.call(this,n))}),{passive:!0})},this.ignore=function(e){return null===e||'undefined'==e||(this.isString(e)?0===e.length||!e.trim():Array.isArray(e)?0===e.length:e&&e.constructor===Object?0===Object.keys(e).length:!e)},this.getBoolean=function(e){return!0===e||!1===e?n:!(this.ignore(e)||!this.isString(e))&&this.attrib.bool.includes(e.trim().toUpperCase())},this.getUniqueId=function(e){for(e.name||(e.name='n'),e.range||(e.range=100);document.getElementById(e.el=e.name+Math.floor(Math.random()*e.range)););return e.el},this.removeDuplcates=function(e,t){const n=JSON.stringify;let i=[...new Map(e.map((e=>[n(e),e]))).values()];return t?i.sort(((e,t)=>e-t)):i},this.parseText=function(e){if(this.ignore(e.text))return;if(e.regex||e.text.includes('</template>'))return e.text.replace(this.attrib.markup,'');let t=(new DOMParser).parseFromString(e.text,'text/html');return t.body.textContent||t.body.innerText},this.inspect=function(e){const t=function(e){let t=e.notification+' [ DateTime: '+(new Date).toLocaleString()+' ]';console.error(t),e.alert&&alert(t)},n={[this.attrib.notify]:function(){e.logtrace&&console.info(e.notification)},[this.attrib.warn]:function(){e.logtrace&&console.warn(e.notification)},[this.attrib.reference]:function(){e.logtrace&&console.log('Reference: '+this.attrib.newline+this.attrib.newline+e.reference)},[this.attrib.error]:function(){t({notification:e.notification,alert:e.logtrace})},[this.attrib.default]:function(){t({notification:'Unhandled exception'})}};n[e.type]()||n[this.attrib.default]},this.getProperties=function(e={},t=''){for(let n in e)t+=n+': '+e[n]+', ';return t.replace(/, +$/g,'')},this.attrib={reference:1,notify:2,warn:3,default:98,error:99,bArray:['true','1','enable','confirm','grant','active','on','yes'],pArray:['color','font','padding','top','bottom'],tArray:['link','script','style'],isWindows:-1!=navigator.appVersion.indexOf('Win'),nonWordChars:'/()"\':,.;<>~!@#$%^&*|+=[]{}`?-â€¦',whitespace:/\s/g,markup:/(<([^>]+)>)/gi,get newline(){return this.isWindows?'\r\n':'\n'},get bool(){return this.bArray.map((e=>e.trim().toUpperCase()))},get tagName(){return this.tArray.map((e=>e.trim().toUpperCase()))},get metaUrl(){return import.meta.url}}}).call(i),function(){const r=e.tagName.toLocaleLowerCase(),a=new Map,o={markup:'Image list markup ',element:'The element attributes ',srcSearch:'The '+r+' src attribute url is unavailable. Searching for the fallback template element in the document body',tagSearch:'There is no \'embed\' elementId available. Looking for the first occurance of a <template> or <noscript> tagname',properties:'Error: Unable to find the '+r+' document element',list:'Error: Unable to find either the fetch '+r+' nor the fallback template elements',template:'Error: Unable to find the fallback template element when searching the document body',cache:'Warning: cache response status '};Object.freeze(o),this.srcOpen=function(e){window.open(e.element.getAttribute('src'),e.type)},this.node={hasContent:function(){return n.content.properties()?n.content.textList()?n.content.textArray():i.inspect({type:i.attrib.error,notification:o.list}):i.inspect({type:i.attrib.error,notification:o.properties})},showContent:function(){n.get.shadow(),n.get.slide({shadow:t.shadow}),n.get.view()}},this.content={properties:function(){const n=['nub','sub','sur','zoom','cache','trace','delay','embed','fade','auto'],a={nub:function(e){return!i.getBoolean(e)},fade:function(e){return!i.getBoolean(e)},cache:function(e){return!i.getBoolean(e)},zoom:function(e){return!!i.ignore(e)||i.getBoolean(e)},trace:function(e){return i.getBoolean(e)},delay:function(e){return Number.isInteger(parseInt(e))?parseInt(e):250},embed:function(e){return!i.ignore(e)&&e}};return function(){if(i.ignore(e))return!1;e.id=i.getUniqueId({name:r,range:1e3});let s=function(r){let o=e.getAttribute(r);if(i.ignore(o))return!1;let s=o.replace(/ :|: /gi,':').split(','),c=s[0];if(!Number.isInteger(parseInt(c))){if(!i.getBoolean(c))return!1;s.length>1&&s.shift()}if('auto'==r)return t.attrib.autocycle=Number.isInteger(parseInt(s[0]))?parseInt(s[0]):10,t.attrib.autopause=Number.isInteger(parseInt(s[1]))?parseInt(s[1]):3e3,t.attrib.autocancel=t.attrib.autocycle>-1,t.attrib.fade=t.attrib.autopause>400,t.attrib.nub='false',!0;const l={get property(){return i.attrib.pArray.map((e=>e.trim().toUpperCase()))},get attribute(){return s.map((e=>e.trim()))}};return n.includes(a)&&function(){if(0==s.length)return;let e='sur'==r?/.surtitle[^&]*?}/i:/.subtitle[^&]*?}/i;l.attribute.forEach((n=>{l.property.includes(n.toUpperCase())&&function(n){let r=Boolean(n.match(/color:/i))?/color[^&]*?;/i:Boolean(n.match(/font:/i))?/font[^&]*?;/i:Boolean(n.match(/padding:/i))?/padding[^&]*?;/i:Boolean(n.match(/top:/i))?/top[^&]*?;/i:Boolean(n.match(/bottom:/i))?/bottom[^&]*?;/i:null;if(!i.ignore(r)){let i=t.shadowStyle.match(e)+'';if(i){let e=i.replace(r,n+';');e&&(t.shadowStyle=t.shadowStyle.replace(i,e))}}}(n)}))}(),!0};return t.attrib.nub=a.nub(e.getAttribute('nub')),t.attrib.fade=a.fade(e.getAttribute('fade')),t.attrib.zoom=a.zoom(e.getAttribute('zoom')),t.attrib.cache=a.cache(e.getAttribute('cache')),t.attrib.trace=a.trace(e.getAttribute('trace')),t.attrib.delay=a.delay(e.getAttribute('delay')),t.attrib.embed=a.embed(e.getAttribute('embed')),t.attrib.sur=s('sur'),t.attrib.sub=s('sub'),t.attrib.auto=s('auto'),Object.freeze(t.attrib),t.template=function(){if(t.srcRoot)return'undefined';let e=t.attrib.embed?document.getElementById(t.attrib.embed):null;return i.ignore(e)&&(i.inspect({type:i.attrib.notify,notification:o.tagSearch,logtrace:t.attrib.trace}),e=document.getElementsByTagName('template')[0]||document.getElementsByTagName('noscript')[0]),i.ignore(e)?'undefined':e}(),!0}()},textList:function(){return t.srcRoot||t.template},textArray:function(){return t.imageArray=null,i.inspect({type:i.attrib.notify,notification:o.element+'['+e.id+'] '+i.getProperties(t.attrib),logtrace:t.attrib.trace}),function(){let n=t.srcRoot?function(){let t=e.textContent;return i.ignore(t)?null:t}():function(){i.inspect({type:i.attrib.notify,notification:o.srcSearch,logtrace:t.attrib.trace});let e='TEMPLATE'==t.template.tagName?t.template.content.textContent:t.template.textContent;return i.ignore(e)?i.inspect({type:i.attrib.error,notification:o.template+' ['+t.attrib.embed+']'}):e}();return i.ignore(n)||(i.inspect({type:i.attrib.notify,notification:o.markup+'['+(t.srcRoot?e.id+' - '+i.fileName(t.src):t.attrib.embed+' - template')+']'+i.attrib.newline+n,logtrace:t.attrib.trace}),t.imageArray=n?n.trim().replace(/\r\n|\r|\n/gi,';').split(';'):null),!i.ignore(t.imageArray)}()}},this.get={shadow:function(){t.shade=document.querySelector('#'+e.id),i.clearElement(t.shade),t.shade.attachShadow({mode:'open'}),t.shadow=t.shade.shadowRoot,n.compose.styles(),n.compose.body(),n.compose.images(),n.compose.track(),t.shadow.append(t.bodyNode),t.attrib.auto||i.setSwipe({node:t.shadow.querySelector('div.slideview-body > div.slideview-image')},(function(e){let i=e.action?e.right:e.left;t.slide=t.slide+=i,n.get.slide({shadow:t.shadow})}),{left:-1,right:1})},slide:function(e){i.ignore(e.shadow)&&(e.shadow=i.ignore(e.node)?t.shadow:function(e){let n=e.getRootNode().host,i=document.querySelector('#'+n.id).shadowRoot,r=i.querySelector('div.slideview-image > div.active');return t.slide=Number.parseInt(r.id.replace('img',''),10),a.set('left',t.slide-1),a.set('right',t.slide+1),a.set('nub',Number.parseInt(e.id.replace('nub',''),10)),t.slide=a.get(e.className),i}(e.node));let n=e.shadow.querySelectorAll('div.slideview-image > div.slide');t.slide=i.ignore(e.autoslide)?t.slide<1?n.length:t.slide>n.length?1:t.slide:e.autoslide;let r=t.slide-1;if(i.ignore(n[r]))return;let o=e.shadow.querySelector('div.slideview-image > div.active');o&&o.classList.replace('active','none'),n[r].classList.replace('none','active');let s=e.shadow.querySelector('div.slideview-nub > span.enabled');s&&(s.className='nub'),e.shadow.querySelectorAll('div.slideview-nub > span.nub')[r].className='nub enabled'},view:function(){const e=function(){let e=t.shadow.querySelectorAll('div.slideview-image > div.slide'),i=t.attrib.autocancel&&t.attrib.autocycle>-1?t.imageArray.length*t.attrib.autocycle:0,r=0,a=1,o=setInterval((function(){a=a<1?e.length:a>e.length?1:a,(t.attrib.autocancel?r===i||(a++,r++,0):(a++,0))&&clearInterval(o),n.get.slide({autoslide:a-1})}),t.attrib.autopause)};setTimeout((function(){t.attrib.auto&&setTimeout((function(){e()}),t.attrib.delay),n.setDisplay.show()}),t.attrib.delay),t.attrib.cache&&function(){if(!('caches'in window))return;t.shadowsrc=t.srcRoot?t.src.split():Array.from('');let e=r+'-cache';i.removeDuplcates(t.shadowsrc.concat(t.cssRoot.concat([i.attrib.metaUrl]))).forEach((n=>{fetch(n).then((r=>(r.ok||i.inspect({type:i.attrib.warn,notification:o.cache+'['+r.status+'] - '+n,logtrace:t.attrib.trace}),caches.open(e).then((e=>e.put(n,r))))))}))}(),i.inspect({type:i.attrib.notify,notification:t.shadow,logtrace:t.attrib.trace})}},this.compose={styles:function(){t.styleNode=document.createElement('style'),t.styleNode.className='slideview-style',t.styleNode.insertAdjacentHTML('beforeend',t.shadowStyle),t.shadow.append(t.styleNode)},body:function(){t.bodyNode=document.createElement('div'),t.bodyNode.className='slideview-body',t.shade.appendChild(t.bodyNode)},images:function(e=0){const r=function(){return i.ignore(l[1])?null:l[1].trim()},a=function(){return t.attrib.sur?i.ignore(l[2])?e+' / '+t.imageArray.length:l[2].trim():null};let o=t.attrib.zoom?'ceres.getImage(this);':'javascript:void(0);',s=n.getClassList('slide');const c=document.createElement('div');c.className='slideview-image',t.bodyNode.appendChild(c);for(let n=0;n<t.imageArray.length;n++){var l=t.imageArray[n].split(',');let u=document.createElement('div');u.id='img'+ ++e,u.className=s,c.appendChild(u),t.attrib.sur&&i.composeElement({type:'div',parent:u,markup:a()},{class:'surtitle fade'}),i.composeElement({type:'img',parent:u},{class:'slide',onclick:o,src:i.ignore(l[0])?null:l[0].trim(),alt:r()}),t.attrib.sub&&i.composeElement({type:'div',parent:u,markup:t.attrib.sub?r():null},{class:'subtitle fade'})}i.composeElement({type:'a',parent:c,markup:'&#10094;'},{class:n.getClassList('left'),onclick:t.href}),i.composeElement({type:'a',parent:c,markup:'&#10095;'},{class:n.getClassList('right'),onclick:t.href})},track:function(e=0){const r=document.createElement('div');r.className=n.getClassList('slideview-nub'),t.bodyNode.appendChild(r);for(let n=0;n<t.imageArray.length;n++)i.composeElement({type:'span',parent:r},{id:'nub'+ ++e,class:'nub',onclick:t.href})}},this.setDisplay={hide:function(){e.style.visibility='hidden',e.style.display='none'},show:function(){e.style.removeProperty('display'),e.style.removeProperty('visibility'),0===e.style.length&&e.removeAttribute('style')}},this.getClassList=function(e){return'slide'!=e?t.attrib.nub&&t.attrib.auto?e+=' none':e:(t.attrib.zoom&&(e+=' zoom'),t.attrib.fade&&(e+=' fade'),e+' none')},this.parseJSON=function(e,n=''){return i.fileType(t.src,'.json')?(JSON.parse(e).forEach((e=>{n+=e.url+(e.sub?', '+e.sub:'')+(e.sur?', '+e.sur:'')+'\n'})),n):e},Object.seal(n)}.call(n)}(),n.setDisplay.hide(),t.srcRoot&&e.insertAdjacentHTML('afterbegin',rsc.parseText({text:n.parseJSON(await(await fetch(t.src)).text())}));for(let e of t.cssRoot)t.shadowStyle+=rsc.parseText({text:await(await fetch(e)).text()});n.node.hasContent()&&n.node.showContent()}});