/**
 * @license
 * ceres-sv v1.0.0
 *
 * Minified using terser v5.5.1
 * Original file: ceresbakalite/ceres-sv/repos/csvjs/ceres-sv.js
 *
 * ceresBakalite/ceres-sv is licensed under the MIT License - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2018 - 2020 Alexander Munro
*/
window.ceres={},function(){const e={};(function(){this.srcOpen=function(e){window.open(e.element.getAttribute('src'),e.type)},this.isString=function(e){return'[object String]'==Object.prototype.toString.call(e)},this.clearElement=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},this.fileName=function(e){return e.substring(e.lastIndexOf('/')+1,e.length)},this.fileType=function(e,t){return e.substring(e.lastIndexOf('.')+1,e.length).toUpperCase()===t.toUpperCase()},this.composeElement=function(e,t){if(!e.type)return;const r=this.attrib.tagName.includes(e.type.trim().toUpperCase())?document.head:e.parent||document.body,n=document.createElement(e.type);Object.entries(t).forEach((([e,t])=>{n.setAttribute(e,t)})),e.markup&&n.insertAdjacentHTML('afterbegin',e.markup),r.appendChild(n)},this.setSwipe=function(e,t,r){e.act||(e.act=80),e.node.addEventListener('touchstart',(t=>{e.start=t.changedTouches[0].screenX}),{passive:!0}),e.node.addEventListener('touchmove',(e=>{e.preventDefault()}),{passive:!0}),e.node.addEventListener('touchend',(n=>{e.end=n.changedTouches[0].screenX,Math.abs(e.start-e.end)>e.act&&(r.action=e.start>e.end,t.call(this,r))}),{passive:!0})},this.ignore=function(e){return null===e||'undefined'==e||(this.isString(e)?0===e.length||!e.trim():Array.isArray(e)?0===e.length:e&&e.constructor===Object?0===Object.keys(e).length:!e)},this.getBoolean=function(e){return!0===e||!1===e?atr:!(this.ignore(e)||!this.isString(e))&&this.attrib.bool.includes(e.trim().toUpperCase())},this.getUniqueId=function(e){e.name||(e.name='n'),e.range||(e.range=100);for(;document.getElementById(e.el=e.name+Math.floor(Math.random()*e.range)););return e.el},this.recursiveReplace=function(e,t,r){return e.replace(t,(function(e){return r[e]}))},this.removeDuplcates=function(e,t){const r=JSON.stringify;let n=[...new Map(e.map((e=>[r(e),e]))).values()];return t?n.sort(((e,t)=>e-t)):n},this.parseText=function(e){if(this.ignore(e.text))return;if(e.regex||e.text.includes('</template>'))return e.text.replace(this.attrib.markup,'');let t=(new DOMParser).parseFromString(e.text,'text/html');return t.body.textContent||t.body.innerText},this.parseCSV=function(t,r={}){r.separator||(r.separator='_&c');const n=r.json||r.nodes,i=t.split('\n'),a=new Array(i.length),o='_&grp;',s=/"[^]*?",|"[^]*?"$/gm,c=new RegExp('_&grp;s*?$','g'),l=function(){let t='';return a.forEach((n=>{if(!e.ignore(n)){t+='{ ';let e=n.split(','),i=0;e.forEach((e=>{t+=function(e){return r.nodes[e]?'"'+r.nodes[e]+'": ':'"node'+e+'1": '}(i)+'"'+e.trim().replace(/"/g,'\\"')+'", ',i++})),t=t.replace(/,\s*?$/,'')+' },\n'}})),'['+t.replace(/,\s*?$/,'')+']'};return i.forEach((e=>{let t=String(e);[...t.matchAll(s)].forEach((e=>{let n=function(e){let t=String(e).replace(/"\s*?$|"\s*?,\s*?$/,'').replace(/^\s*?"/,'');return t=t.replace(/""/g,'"'),t.replace(/,/g,r.separator)+o}(e);t=t.replace(e,n)})),a.push(function(e){let t=e.replace(c,'');return t=t.replaceAll(o,', '),t.replace(/(?<!\s)[,](?!\s)/g,', ')}(t))})),n?l():a.join('\n')},this.inspect=function(e){const t=function(e){let t=e.notification+' [ DateTime: '+(new Date).toLocaleString()+' ]';console.error(t),e.alert&&alert(t)},r={[this.attrib.notify]:function(){e.logtrace&&console.info(e.notification)},[this.attrib.warn]:function(){e.logtrace&&console.warn(e.notification)},[this.attrib.reference]:function(){e.logtrace&&console.log('Reference: '+this.attrib.newline+this.attrib.newline+e.reference)},[this.attrib.error]:function(){t({notification:e.notification,alert:e.logtrace})},[this.attrib.default]:function(){t({notification:'Unhandled exception'})}};r[e.type]()||r[this.attrib.default]},this.getProperties=function(e={},t=''){for(let r in e)t+=r+': '+e[r]+', ';return t.replace(/, +$/g,'')},this.attrib={reference:1,notify:2,warn:3,default:98,error:99,bArray:['true','1','enable','confirm','grant','active','on','yes'],pArray:['color','font','padding','top','bottom'],tArray:['link','script','style'],commaSymbol:'_&c',isWindows:-1!=navigator.appVersion.indexOf('Win'),whitespace:/\s/g,markup:/(<([^>]+)>)/gi,get newline(){return this.isWindows?'\r\n':'\n'},get bool(){return this.bArray.map((e=>e.trim().toUpperCase()))},get tagName(){return this.tArray.map((e=>e.trim().toUpperCase()))},get metaUrl(){return import.meta.url}}}).call(e),window,document,window.customElements.define('ceres-sv',class extends HTMLElement{async connectedCallback(){ceres.getImage=function(t){e.srcOpen({element:t,type:'image'})},ceres.getSlide=function(e){n.get.slide({node:e})};const t=this,r={},n={};t.src=t.getAttribute('src'),r.defaultCSS='https://ceresbakalite.github.io/ceres-sv/prod/ceres-sv.min.css',r.src=e.ignore(t.src)?null:t.src.trim(),r.css=t.getAttribute('css')||r.defaultCSS,r.srcRoot=!e.ignore(r.src),r.cssRoot=e.removeDuplcates(r.css.trim().replace(/,/gi,';').replace(/;+$/g,'').replace(/[^\x00-\xFF]| /g,'').split(';')),r.shadowStyle='',r.attrib={},r.slide=1,function(){const i=t.tagName.toLocaleLowerCase(),a=new Map,o={markup:'Image list markup ',element:'The element attributes ',srcSearch:'The '+i+' src attribute url is unavailable. Searching for the fallback template element in the document body',tagSearch:'There is no \'embed\' elementId available. Looking for the first occurance of a <template> or <noscript> tagname',properties:'Error: Unable to find the '+i+' document element',list:'Error: Unable to find either the fetch '+i+' nor the fallback template elements',template:'Error: Unable to find the fallback template element when searching the document body',cache:'Warning: cache response status '};Object.freeze(o),this.node={hasContent:function(){return n.content.properties()?n.content.textList()?n.content.textArray():e.inspect({type:e.attrib.error,notification:o.list}):e.inspect({type:e.attrib.error,notification:o.properties})},showContent:function(){n.get.shadow(),n.get.slide({shadow:r.shadow}),n.get.view()}},this.content={properties:function(){const n=['nub','sub','sur','zoom','cache','trace','delay','embed','fade','auto','loading'],a={nub:function(t){return!e.getBoolean(t)},fade:function(t){return!e.getBoolean(t)},cache:function(t){return!e.getBoolean(t)},zoom:function(t){return!!e.ignore(t)||e.getBoolean(t)},trace:function(t){return e.getBoolean(t)},delay:function(e){return Number.isInteger(parseInt(e))?parseInt(e):250},loading:function(t){return e.ignore(t)?'auto':t},embed:function(t){return!e.ignore(t)&&t}};return function(){if(e.ignore(t))return!1;t.id=e.getUniqueId({name:i,range:1e3});let s=function(i){let o=t.getAttribute(i);if(e.ignore(o))return!1;let s=o.replace(/ :|: /gi,':').split(','),c=s[0];if(!Number.isInteger(parseInt(c))){if(!e.getBoolean(c))return!1;s.length>1&&s.shift()}if('auto'==i)return r.attrib.autocycle=Number.isInteger(parseInt(s[0]))?parseInt(s[0]):10,r.attrib.autopause=Number.isInteger(parseInt(s[1]))?parseInt(s[1]):3e3,r.attrib.autocancel=r.attrib.autocycle>-1,r.attrib.fade=r.attrib.autopause>400,r.attrib.nub='false',!0;const l={get property(){return e.attrib.pArray.map((e=>e.trim().toUpperCase()))},get attribute(){return s.map((e=>e.trim()))}};return n.includes(a)&&function(){if(0==s.length)return;let t='sur'==i?/.surtitle[^&]*?}/i:/.subtitle[^&]*?}/i;l.attribute.forEach((n=>{l.property.includes(n.toUpperCase())&&function(n){let i=Boolean(n.match(/color:/i))?/color[^&]*?;/i:Boolean(n.match(/font:/i))?/font[^&]*?;/i:Boolean(n.match(/padding:/i))?/padding[^&]*?;/i:Boolean(n.match(/top:/i))?/top[^&]*?;/i:Boolean(n.match(/bottom:/i))?/bottom[^&]*?;/i:null;if(!e.ignore(i)){let e=String(r.shadowStyle.match(t));if(e){let t=e.replace(i,n+';');t&&(r.shadowStyle=r.shadowStyle.replace(e,t))}}}(n)}))}(),!0};return r.attrib.nub=a.nub(t.getAttribute('nub')),r.attrib.fade=a.fade(t.getAttribute('fade')),r.attrib.zoom=a.zoom(t.getAttribute('zoom')),r.attrib.cache=a.cache(t.getAttribute('cache')),r.attrib.trace=a.trace(t.getAttribute('trace')),r.attrib.delay=a.delay(t.getAttribute('delay')),r.attrib.loading=a.loading(t.getAttribute('loading')),r.attrib.embed=a.embed(t.getAttribute('embed')),r.attrib.sur=s('sur'),r.attrib.sub=s('sub'),r.attrib.auto=s('auto'),Object.freeze(r.attrib),r.template=function(){if(r.srcRoot)return'undefined';let t=r.attrib.embed?document.getElementById(r.attrib.embed):null;return e.ignore(t)&&(e.inspect({type:e.attrib.notify,notification:o.tagSearch,logtrace:r.attrib.trace}),t=document.getElementsByTagName('template')[0]||document.getElementsByTagName('noscript')[0]),e.ignore(t)?'undefined':t}(),!0}()},textList:function(){return r.srcRoot||r.template},textArray:function(){return r.imageArray=null,e.inspect({type:e.attrib.notify,notification:o.element+'['+t.id+'] '+e.getProperties(r.attrib),logtrace:r.attrib.trace}),function(){let n=r.srcRoot?function(){let r=t.textContent;return e.ignore(r)?null:r}():function(){e.inspect({type:e.attrib.notify,notification:o.srcSearch,logtrace:r.attrib.trace});let t='TEMPLATE'==r.template.tagName?r.template.content.textContent:r.template.textContent;return e.ignore(t)?e.inspect({type:e.attrib.error,notification:o.template+' ['+r.attrib.embed+']'}):t}();return e.ignore(n)||(e.inspect({type:e.attrib.notify,notification:o.markup+'['+(r.srcRoot?t.id+' - '+e.fileName(r.src):r.attrib.embed+' - template')+']'+e.attrib.newline+n,logtrace:r.attrib.trace}),r.imageArray=n?n.trim().split('\n'):null),!e.ignore(r.imageArray)}()}},this.get={shadow:function(){r.shade=document.querySelector('#'+t.id),e.clearElement(r.shade),r.shade.attachShadow({mode:'open'}),r.shadow=r.shade.shadowRoot,n.compose.styles(),n.compose.body(),n.compose.images(),n.compose.track(),r.shadow.appendChild(r.bodyNode),r.attrib.auto||e.setSwipe({node:r.shadow.querySelector('div.slideview-body > div.slideview-image')},(function(e){let t=e.action?e.right:e.left;r.slide=r.slide+=t,n.get.slide({shadow:r.shadow})}),{left:-1,right:1})},slide:function(t){e.ignore(t.shadow)&&(t.shadow=e.ignore(t.node)?r.shadow:function(e){let t=e.getRootNode().host,n=document.querySelector('#'+t.id).shadowRoot,i=n.querySelector('div.slideview-image > div.active');return r.slide=Number.parseInt(i.id.replace('img',''),10),a.set('left',r.slide-1),a.set('right',r.slide+1),a.set('nub',Number.parseInt(e.id.replace('nub',''),10)),r.slide=a.get(e.className),n}(t.node));let n=t.shadow.querySelectorAll('div.slideview-image > div.slide');r.slide=e.ignore(t.autoslide)?r.slide<1?n.length:r.slide>n.length?1:r.slide:t.autoslide;let i=r.slide-1;if(e.ignore(n[i]))return;let o=t.shadow.querySelector('div.slideview-image > div.active');o&&o.classList.replace('active','none'),n[i].classList.replace('none','active');let s=t.shadow.querySelector('div.slideview-nub > span.enabled');s&&(s.className='nub'),t.shadow.querySelectorAll('div.slideview-nub > span.nub')[i].className='nub enabled'},view:function(){const t=function(){let e=r.shadow.querySelectorAll('div.slideview-image > div.slide'),t=r.attrib.autocancel&&r.attrib.autocycle>-1?r.imageArray.length*r.attrib.autocycle:0,i=0,a=1,o=setInterval((function(){a=a<1?e.length:a>e.length?1:a,(r.attrib.autocancel?i===t||(a++,i++,0):(a++,0))&&clearInterval(o),n.get.slide({autoslide:a-1})}),r.attrib.autopause)};setTimeout((function(){r.attrib.auto&&setTimeout((function(){t()}),r.attrib.delay),n.setDisplay.show()}),r.attrib.delay),r.attrib.cache&&function(){if(!('caches'in window))return;r.shadowsrc=r.srcRoot?r.src.split():Array.from('');let t=i+'-cache';e.removeDuplcates(r.shadowsrc.concat(r.cssRoot.concat([e.attrib.metaUrl]))).forEach((n=>{fetch(n).then((i=>(i.ok||e.inspect({type:e.attrib.warn,notification:o.cache+'['+i.status+'] - '+n,logtrace:r.attrib.trace}),caches.open(t).then((e=>e.put(n,i))))))}))}(),e.inspect({type:e.attrib.notify,notification:r.shadow,logtrace:r.attrib.trace})}},this.compose={href:'ceres.getSlide(this)',styles:function(){r.styleNode=document.createElement('style'),r.styleNode.className='slideview-style',r.styleNode.insertAdjacentHTML('beforeend',r.shadowStyle),r.shadow.appendChild(r.styleNode)},body:function(){r.bodyNode=document.createElement('div'),r.bodyNode.className='slideview-body',r.shade.appendChild(r.bodyNode)},images:function(t=0){const i=r.attrib.zoom?'ceres.getImage(this);':'javascript:void(0);',a=n.getClassList('slide'),o=function(){return e.ignore(l[2])?t+' / '+r.imageArray.length:l[2].trim()},s=function(){return e.ignore(l[1])?null:l[1].trim()},c=document.createElement('div');c.className='slideview-image',r.bodyNode.appendChild(c);for(let n=0;n<r.imageArray.length;n++){var l=r.imageArray[n].split(',');let u=document.createElement('div');u.id='img'+ ++t,u.className=a,c.appendChild(u),r.attrib.sur&&e.composeElement({type:'div',parent:u,markup:r.attrib.sur?o():null},{class:'surtitle fade'}),e.composeElement({type:'img',parent:u},{class:'slide',onclick:i,src:e.ignore(l[0])?null:l[0].trim(),alt:s(),loading:Boolean(r.attrib.loading.match(/lazy|eager|auto/i))?r.attrib.loading:'auto'}),r.attrib.sub&&e.composeElement({type:'div',parent:u,markup:r.attrib.sub?s():null},{class:'subtitle fade'})}e.composeElement({type:'a',parent:c,markup:'&#10094;'},{class:n.getClassList('left'),onclick:this.href}),e.composeElement({type:'a',parent:c,markup:'&#10095;'},{class:n.getClassList('right'),onclick:this.href})},track:function(t=0){const i=document.createElement('div');i.className=n.getClassList('slideview-nub'),r.bodyNode.appendChild(i);for(let n=0;n<r.imageArray.length;n++)e.composeElement({type:'span',parent:i},{id:'nub'+ ++t,class:'nub',onclick:this.href})}},this.setDisplay={hide:function(){t.style.visibility='hidden',t.style.display='none'},show:function(){t.style.removeProperty('display'),t.style.removeProperty('visibility'),0===t.style.length&&t.removeAttribute('style')}},this.getClassList=function(e){return'slide'!=e?r.attrib.nub&&r.attrib.auto?e+=' none':e:(r.attrib.zoom&&(e+=' zoom'),r.attrib.fade&&(e+=' fade'),e+' none')},this.getFileType=function(t){return e.fileType(r.src,'json')?n.parseJSON(t):e.fileType(r.src,'csv')?n.parseJSON(e.parseCSV(t,{separator:e.attrib.commaSymbol,json:!0,nodes:['url','sub','sur']})):t},this.parseJSON=function(t){let r='';return JSON.parse(t).forEach((t=>{r+=t.url+(t.sub?', '+t.sub.replace(',',e.attrib.commaSymbol):'')+(t.sur?', '+t.sur.replace(',',e.attrib.commaSymbol):'')+'\n'})),r},Object.seal(n)}.call(n),n.setDisplay.hide(),r.srcRoot&&t.insertAdjacentHTML('afterbegin',e.parseText({text:n.getFileType(await(await fetch(r.src)).text())}).replace(/&comma;/g,e.attrib.commaSymbol)),console.log(e.parseText({text:n.getFileType(await(await fetch(r.src)).text())}).replace(/&comma;/g,e.attrib.commaSymbol));for(let t of r.cssRoot)r.shadowStyle+=e.parseText({text:await(await fetch(t)).text()});n.node.hasContent()&&n.node.showContent()}})}();