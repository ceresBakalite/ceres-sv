/**
 * @license
 * ceres-sv v1.0.0
 *
 * Minified using terser v5.4.0
 * Original file: ceresbakalite/ceres-sv/repos/csvjs/ceres-sv.js
 *
 * ceresBakalite/ceres-sv is licensed under the MIT License - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2020 Alexander Munro
*/
window.ceres={},function(){const t={};(function(){this.srcOpen=function(t){window.open(t.element.getAttribute('src'),t.type)},this.isString=function(t){return'[object String]'==Object.prototype.toString.call(t)},this.clearElement=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},this.composeElement=function(t,e){if(!t.type)return;const r=this.attrib.tagName.includes(t.type.trim().toUpperCase())?document.head:t.parent||document.body,i=document.createElement(t.type);Object.entries(e).forEach((([t,e])=>{i.setAttribute(t,e)})),t.markup&&i.insertAdjacentHTML('afterbegin',t.markup),r.appendChild(i)},this.setHorizontalSwipe=function(t,e,r){t.act||(t.act=80),t.node.addEventListener('touchstart',(e=>{t.start=e.changedTouches[0].screenX}),{passive:!0}),t.node.addEventListener('touchmove',(t=>{t.preventDefault()}),{passive:!0}),t.node.addEventListener('touchend',(i=>{t.end=i.changedTouches[0].screenX,Math.abs(t.start-t.end)>t.act&&(r.action=t.start>t.end,e.call(this,r))}),{passive:!0})},this.isEmptyOrNull=function(t){return null===t||'undefined'==t||(this.isString(t)?0===t.length||!t.trim():Array.isArray(t)?0===t.length:t&&t.constructor===Object?0===Object.keys(t).length:!t)},this.getBooleanAttribute=function(t){return!0===t||!1===t?atr:!(this.isEmptyOrNull(t)||!this.isString(t))&&this.attrib.bool.includes(t.trim().toUpperCase())},this.getUniqueElementId=function(t){t.name||(t.name='n'),t.range||(t.range=100);for(;document.getElementById(t.el=t.name+Math.floor(Math.random()*t.range)););return t.el},this.removeDuplcates=function(t,e){const r=JSON.stringify;let i=[...new Map(t.map((t=>[r(t),t]))).values()];return e?i.sort(((t,e)=>t-e)):i},this.parseText=function(t){if(this.isEmptyOrNull(t.text))return;if(t.regex||t.text.includes('</template>'))return t.text.replace(this.attrib.markup,'');let e=(new DOMParser).parseFromString(t.text,'text/html');return e.body.textContent||e.body.innerText},this.inspect=function(t){const e=function(t){let e=t.notification+' [ DateTime: '+(new Date).toLocaleString()+' ]';console.error(e),t.alert&&alert(e)},r={[this.attrib.notify]:function(){t.logtrace&&console.info(t.notification)},[this.attrib.warn]:function(){t.logtrace&&console.warn(t.notification)},[this.attrib.reference]:function(){t.logtrace&&console.log('Reference: '+this.attrib.newline+this.attrib.newline+t.reference)},[this.attrib.error]:function(){e({notification:t.notification,alert:t.logtrace})},[this.attrib.default]:function(){e({notification:'Unhandled exception'})}};r[t.type]()||r[this.attrib.default]},this.getObjectProperties=function(t={},e=''){for(let r in t)e+=r+': '+t[r]+', ';return e.replace(/, +$/g,'')},this.attrib={reference:1,notify:2,warn:3,default:98,error:99,bArray:['true','1','enable','confirm','grant','active','on','yes'],tagArray:['link','script','style'],isWindows:-1!=navigator.appVersion.indexOf('Win'),nonWordChars:'/()"\':,.;<>~!@#$%^&*|+=[]{}`?-â€¦',whitespace:/\s/g,markup:/(<([^>]+)>)/gi,get newline(){return this.isWindows?'\r\n':'\n'},get bool(){return this.bArray.map((t=>t.trim().toUpperCase()))},get tagName(){return this.tagArray.map((t=>t.trim().toUpperCase()))},get metaUrl(){return import.meta.url}}}).call(t),window.customElements.define('ceres-sv',class extends HTMLElement{async connectedCallback(){ceres.getImage=function(e){t.srcOpen({element:e,type:'image'})},ceres.getSlide=function(t){i.node.setSlide({node:t})};const e=this,r={},i={};e.src=e.getAttribute('src'),r.defaultCSS='https://ceresbakalite.github.io/ceres-sv/prod/ceres-sv.min.css',r.src=t.isEmptyOrNull(e.src)?null:e.src.trim(),r.css=e.getAttribute('css')||r.defaultCSS,r.fetchsrc=!t.isEmptyOrNull(r.src),r.attrib={},r.slide=1,function(){const n=function(t){return!r.attrib.nub||r.attrib.static?t:t+=' none'},a=e.tagName.toLocaleLowerCase(),s=new Map,o={imageMarkup:'Image list markup ',configAttributes:'The element attributes ',templateSearch:'The '+a+' src attribute url is unavailable. Searching for the fallback template element in the document body',elementSearch:'There is no \'embed\' elementId available. Looking for the first occurance of a <template> or <noscript> tagname',precursorError:'Error: Unable to find the '+a+' document element',fetchListError:'Error: Unable to find either the fetch '+a+' nor the fallback template elements',templateError:'Error: Unable to find the fallback template element when searching the document body',cacheWarning:'Warning: cache response status '};Object.freeze(o),this.view={hasProperties:function(){return i.precursor.getAttributes()?i.precursor.getList()?i.precursor.getContent():t.inspect({type:t.attrib.error,notification:o.fetchListError}):t.inspect({type:t.attrib.error,notification:o.precursorError})},activate:function(){i.node.setShadow(),i.node.setSlide({shadow:r.shadow}),i.node.setView()}},this.precursor={getAttributes:function(){const i=!t.isEmptyOrNull(e);return i&&(e.id=t.getUniqueElementId({name:a,range:1e3}),r.attrib.delay=Number.isInteger(parseInt(e.getAttribute('delay')))?parseInt(e.getAttribute('delay')):250,r.attrib.sur=t.getBooleanAttribute(e.getAttribute('sur')),r.attrib.sub=t.getBooleanAttribute(e.getAttribute('sub')),r.attrib.trace=t.getBooleanAttribute(e.getAttribute('trace')),r.attrib.cache=!t.getBooleanAttribute(e.getAttribute('cache')),r.attrib.fade=!t.getBooleanAttribute(e.getAttribute('fade')),r.attrib.nub=!t.getBooleanAttribute(e.getAttribute('nub')),r.attrib.zoom=function(){let r=e.getAttribute('zoom');return!!t.isEmptyOrNull(r)||t.getBooleanAttribute(r)}(),r.attrib.static=function(){let i=e.getAttribute('auto');if(t.isEmptyOrNull(i))return!0;let n=i.replace(t.attrib.whitespace,'').split(','),a=n[0];if(!Number.isInteger(parseInt(a))){if(!t.getBooleanAttribute(a))return!0;n.length>1&&n.shift()}return r.attrib.autocycle=Number.isInteger(parseInt(n[0]))?parseInt(n[0]):10,r.attrib.autopause=Number.isInteger(parseInt(n[1]))?parseInt(n[1]):3e3,r.attrib.autocancel=r.attrib.autocycle>-1,r.attrib.fade=r.attrib.autopause>400,r.attrib.nub='false',!1}(),r.attrib.embed=function(){let r=e.getAttribute('embed');return!t.isEmptyOrNull(r)&&r}(),Object.freeze(r.attrib),r.template=function(){if(r.fetchsrc)return'undefined';let e=r.attrib.embed?document.getElementById(r.attrib.embed):null;return t.isEmptyOrNull(e)&&(t.inspect({type:t.attrib.notify,notification:o.elementSearch,logtrace:r.attrib.trace}),e=document.getElementsByTagName('template')[0]||document.getElementsByTagName('noscript')[0]),t.isEmptyOrNull(e)?'undefined':e}()),i},getList:function(){return r.fetchsrc||r.template},getContent:function(){return r.imageArray=null,t.inspect({type:t.attrib.notify,notification:o.configAttributes+'['+e.id+'] '+t.getObjectProperties(r.attrib),logtrace:r.attrib.trace}),function(){let i=r.fetchsrc?function(){let r=e.textContent;return t.isEmptyOrNull(r)?null:r}():function(){t.inspect({type:t.attrib.notify,notification:o.templateSearch,logtrace:r.attrib.trace});let e='TEMPLATE'==r.template.tagName?r.template.content.textContent:r.template.textContent;return t.isEmptyOrNull(e)?t.inspect({type:t.attrib.error,notification:o.templateError+' ['+r.attrib.embed+']'}):e}();return t.isEmptyOrNull(i)||(t.inspect({type:t.attrib.notify,notification:o.imageMarkup+'['+(r.fetchsrc?e.id+' - fetch':r.attrib.embed+' - template')+']'+t.attrib.newline+i,logtrace:r.attrib.trace}),r.imageArray=i?i.trim().replace(/\r\n|\r|\n/gi,';').split(';'):null),!t.isEmptyOrNull(r.imageArray)}()}},this.node={setShadow:function(){r.shade=document.querySelector('#'+e.id),t.clearElement(r.shade),r.shade.attachShadow({mode:'open'}),r.shadow=r.shade.shadowRoot,this.setStyles(),this.setBody(),this.setImages(),this.setTrack(),r.shadow.append(r.bodyContainer),r.attrib.static&&t.setHorizontalSwipe({node:r.shadow.querySelector('div.slideview-body > div.slideview-image')},i.getSwipeCallback,{left:-1,right:1})},setSlide:function(e){t.isEmptyOrNull(e.shadow)&&(e.shadow=t.isEmptyOrNull(e.node)?r.shadow:i.getShadow(e.node));const n=e.shadow.querySelectorAll('div.slideview-image > div.slide');r.slide=t.isEmptyOrNull(e.autoslide)?r.slide<1?n.length:r.slide>n.length?1:r.slide:e.autoslide;const a=r.slide-1;if(t.isEmptyOrNull(n[a]))return;const s=e.shadow.querySelector('div.slideview-image > div.active');s&&s.classList.replace('active','none'),n[a].classList.replace('none','active');const o=e.shadow.querySelector('div.slideview-nub > span.enabled');o&&(o.className='nub'),e.shadow.querySelectorAll('div.slideview-nub > span.nub')[a].className='nub enabled'},setView:function(){setTimeout((function(){r.attrib.static||setTimeout((function(){i.setAuto()}),r.attrib.delay),i.setState.show()}),r.attrib.delay),r.attrib.cache&&i.insertCache(),t.inspect({type:t.attrib.notify,notification:r.shadow,logtrace:r.attrib.trace})},setStyles:function(){r.styleContainer=document.createElement('style'),r.styleContainer.className='slideview-style',r.shade.appendChild(r.styleContainer),r.cachecss=t.removeDuplcates(r.css.trim().replace(/,/gi,';').replace(/;+$/g,'').replace(/[^\x00-\xFF]| /g,'').split(';')),r.cachecss.forEach((t=>{fetch(t).then((t=>t.text())).then((t=>{r.styleContainer.insertAdjacentHTML('beforeend',t)}))})),r.shadow.append(r.styleContainer)},setBody:function(){r.bodyContainer=document.createElement('div'),r.bodyContainer.className='slideview-body',r.shade.appendChild(r.bodyContainer)},setImages:function(e=0){const i=function(){return t.isEmptyOrNull(o[1])?null:o[1].trim()},a=function(t='slide'){return r.attrib.zoom&&(t+=' zoom'),r.attrib.fade&&(t+=' fade'),t+' none'}(),s=document.createElement('div');s.className='slideview-image',r.bodyContainer.appendChild(s);for(let n=0;n<r.imageArray.length;n++){var o=r.imageArray[n].split(',');let c=document.createElement('div');c.id='img'+ ++e,c.className=a,s.appendChild(c),r.attrib.sur&&t.composeElement({type:'div',parent:c,markup:r.attrib.sur?e+' / '+r.imageArray.length:null},{class:'surtitle'}),t.composeElement({type:'img',parent:c},{class:'slide',onclick:r.attrib.zoom?'ceres.getImage(this);':'javascript:void(0);',src:t.isEmptyOrNull(o[0])?null:o[0].trim(),alt:i()}),r.attrib.sub&&t.composeElement({type:'div',parent:c,markup:r.attrib.sub?i():null},{class:'subtitle'})}t.composeElement({type:'a',parent:s,markup:'&#10094;'},{class:n('left'),onclick:'ceres.getSlide(this)'}),t.composeElement({type:'a',parent:s,markup:'&#10095;'},{class:n('right'),onclick:'ceres.getSlide(this)'})},setTrack:function(e=0){const i=document.createElement('div');i.className=n('slideview-nub'),r.bodyContainer.appendChild(i);for(let n=0;n<r.imageArray.length;n++)t.composeElement({type:'span',parent:i},{id:'nub'+ ++e,class:'nub',onclick:'ceres.getSlide(this)'})}},this.setState={hide:function(){e.classList.add('none'),e.style.display='none'},show:function(){e.classList.remove('none'),e.style.removeProperty('display'),0===e.classList.length&&e.removeAttribute('class'),0===e.style.length&&e.removeAttribute('style')}},this.parseJSON=function(t,e=''){return'.json'!=r.src.substring(r.src.lastIndexOf('.'),r.src.length)?t:(JSON.parse(t).forEach((t=>{e+=t.url+', '+t.text+'\n'})),e)},this.insertCache=function(){if(!('caches'in window))return;r.cachesrc=r.fetchsrc?r.src.split():Array.from('');const e=a+'-cache';t.removeDuplcates(r.cachesrc.concat(r.cachecss.concat([t.attrib.metaUrl]))).forEach((i=>{fetch(i).then((n=>(n.ok||t.inspect({type:t.attrib.warn,notification:o.cacheWarning+'['+n.status+'] - '+i,logtrace:r.attrib.trace}),caches.open(e).then((t=>t.put(i,n))))))}))},this.setAuto=function(){const t=r.shadow.querySelectorAll('div.slideview-image > div.slide'),e=r.attrib.autocancel&&r.attrib.autocycle>-1?r.imageArray.length*r.attrib.autocycle:0;let n=0,a=1,s=setInterval((function(){a=a<1?t.length:a>t.length?1:a,(r.attrib.autocancel?n===e||(a++,n++,0):(a++,0))&&clearInterval(s),i.node.setSlide({autoslide:a-1})}),r.attrib.autopause)},this.getSwipeCallback=function(t){const e=t.action?t.right:t.left;r.slide=r.slide+=e,i.node.setSlide({shadow:r.shadow})},this.getShadow=function(t){const e=t.getRootNode().host,i=document.querySelector('#'+e.id).shadowRoot,n=i.querySelector('div.slideview-image > div.active');return r.slide=Number.parseInt(n.id.replace('img',''),10),s.set('left',r.slide-1),s.set('right',r.slide+1),s.set('nub',Number.parseInt(t.id.replace('nub',''),10)),r.slide=s.get(t.className),i},Object.seal(i)}.call(i),i.setState.hide(),r.fetchsrc&&e.insertAdjacentHTML('afterbegin',t.parseText({text:i.parseJSON(await(await fetch(r.src)).text())})),i.view.hasProperties()&&i.view.activate()}})}();