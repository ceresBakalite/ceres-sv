/**
 * @license
 * ceres-sv v1.0.0
 *
 * Minified using terser v5.5.1
 * Original file: ceresbakalite/ceres-sv/repos/csvjs/ceres-sv.js
 *
 * ceresBakalite/ceres-sv is licensed under the MIT License - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2018 - 2020 Alexander Munro
*/
globalThis.ceres={},function(){this.reference=1,this.notify=2,this.warn=3,this.default=98,this.error=99,this.bArray=['true','1','enable','confirm','grant','active','on','yes'],this.elArray=['link','script','style'],this.isWindows=-1!=navigator.appVersion.indexOf('Win'),this.newline=this.isWindows?'\r\n':'\n',this.docHead=this.elArray.map((e=>e.trim().toUpperCase())),this.bool=this.bArray.map((e=>e.trim().toUpperCase())),this.clearElement=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},this.elementNode=e=>e.nodeName.toLocaleLowerCase(),this.fileName=e=>e.substring(e.lastIndexOf('/')+1,e.length),this.fileType=(e,t)=>e.substring(e.lastIndexOf('.')+1,e.length).toUpperCase()===t.toUpperCase(),this.srcOpen=e=>globalThis.open(e.element.getAttribute('src'),e.type),this.isString=e=>'[object String]'==Object.prototype.toString.call(e),this.composeElement=(e,t)=>{if(this.ignore(e.type))return;const s=this.docHead.includes(e.type.trim().toUpperCase())?document.head:e.parent||document.body,n=document.createElement(e.type);Object.entries(t).forEach((([e,t])=>{t&&n.setAttribute(e,t)})),e.markup&&n.insertAdjacentHTML('afterbegin',e.markup),s.appendChild(n)},this.setSwipe=(e,t,s)=>{e.act||(e.act=80),e.node.addEventListener('touchstart',(t=>{e.start=t.changedTouches[0].screenX}),{passive:!0}),e.node.addEventListener('touchmove',(e=>{e.preventDefault()}),{passive:!0}),e.node.addEventListener('touchend',(n=>{e.end=n.changedTouches[0].screenX,Math.abs(e.start-e.end)>e.act&&(s.action=e.start>e.end,t.call(this,s))}),{passive:!0})},this.ignore=e=>null===e||'undefined'==e||(this.isString(e)?0===e.length||!e.trim():Array.isArray(e)?0===e.length:e&&e.constructor===Object?0===Object.keys(e).length:!e),this.getBoolean=e=>!0===e||!1===e?e:!(this.ignore(e)||!this.isString(e))&&this.bool.includes(e.trim().toUpperCase()),this.getUniqueId=e=>{for(e.name||(e.name='n'),e.range||(e.range=100);document.getElementById(e.el=e.name+Math.floor(Math.random()*e.range)););return e.el},this.removeDuplcates=(e,t)=>{const s=JSON.stringify,n=[...new Map(e.map((e=>[s(e),e]))).values()];return t?n.sort(((e,t)=>e-t)):n},this.softSanitize=(e,t='text/html')=>this.ignore(e)?null:(new DOMParser).parseFromString(e,t).documentElement.textContent.replace(/</g,'&lt;'),this.inspect=e=>{const t=e=>{const t=e.notification+' [ DateTime: '+(new Date).toLocaleString()+' ]';console.error(t),e.alert&&alert(t)},s={[this.notify]:()=>{e.logtrace&&console.info(e.notification)},[this.warn]:()=>{e.logtrace&&console.warn(e.notification)},[this.reference]:()=>{e.logtrace&&console.log('Reference: '+this.newline+this.newline+e.reference)},[this.error]:()=>t({notification:e.notification,alert:e.logtrace}),[this.default]:()=>t({notification:'Unhandled exception'})};s[e.type]()||s[this.default]},this.getProperties=(e={},t='')=>{for(let s in e)t+=s+': '+e[s]+', ';return t.replace(/, +$/g,'')}}.call({}),globalThis.customElements.define('ceres-sv',class extends HTMLElement{async connectedCallback(){ceres.getImage=e=>rsc.srcOpen({element:e,type:'image'}),ceres.getSlide=e=>t.get.slide({node:e});const e={},t={};var s;(s=this).src=s.getAttribute('src'),e.defaultCSS='https://ceresbakalite.github.io/ceres-sv/prod/ceres-sv.min.css',e.src=rsc.ignore(s.src)?null:s.src.trim(),e.css=s.getAttribute('css')||e.defaultCSS,e.srcRoot=!rsc.ignore(e.src),e.commaCodes=/,|&comma;|&#x2c;|&#44;|U+0002C/g,e.commaSymbol='_&c',e.shadowStyle='',e.node={},e.slide=1,e.cssRoot=rsc.removeDuplcates(e.css.trim().replace(/,/gi,';').replace(/;+$/g,'').replace(/[^\x00-\xFF]| /g,'').split(';')),function(){const n=rsc.elementNode(s),o=new Map,r={markup:'Image list markup ',element:'The element attributes ',tagSearch:'The '+n+' src attribute url is unavailable and there is no \'local\' elementId. Looking for the first occurance of a <template> or <noscript> tagname',properties:'Error: Unable to find the '+n+' document element',list:'Error: Unable to find either the '+n+' document element nor the fallback local template elements',template:'Error: Unable to find the local fallback template element when searching the document body',cache:'Warning: cache response status '};Object.freeze(r),this.instance={hasContent:()=>this.content.properties()?this.content.textList()?this.content.textArray():rsc.inspect({type:rsc.error,notification:r.list}):rsc.inspect({type:rsc.error,notification:r.properties}),showContent:()=>{this.get.shadow(),this.get.slide({shadow:e.shadow}),this.get.view()}},this.content={properties:()=>{const t=['color','font','padding','top','bottom'],o=['sub','sur'];return(()=>{if(rsc.ignore(s))return!1;s.id=rsc.getUniqueId({name:n,range:1e3});const a=n=>{const r=s.getAttribute(n),a='cache'==n||'zoom'==n,i={nub:!rsc.getBoolean(r),fade:!rsc.getBoolean(r),trace:rsc.getBoolean(r),loading:r||'auto',local:r||!1,delay:Number.isInteger(parseInt(r,10))?parseInt(r,10):250};if(i.hasOwnProperty(n))return i[n];if(!r)return!!a;const c='sur'!=n?/.subtitle[^&]*?}/i:/.surtitle[^&]*?}/i,l=/(\s+)?:(\s+)?/g,d=r.replace(l,':').split(',').map((e=>e.trim())),m=d[0];if(a)return(()=>{if('cache'==n){const t=d.length>1?d[1].includes('image'):m.includes('image')||null,s=m.includes('image')||rsc.getBoolean(m);return s&&!rsc.ignore(t)&&(e.node.cacheimages=t),s}if('zoom'==n)return!/^false$/i.test(m)&&(e.node.clickevent=d.length>1?d[1]:/^true$/i.test(m)?null:m,!rsc.ignore(e.node.clickevent)||rsc.getBoolean(m))})();if(!Number.isInteger(parseInt(m))){if(!rsc.getBoolean(m))return!1;d.length>1&&d.shift()}return'auto'==n?(e.node.autocycle=Number.isInteger(parseInt(d[0]))?parseInt(d[0]):10,e.node.autopause=Number.isInteger(parseInt(d[1]))?parseInt(d[1]):3e3,e.node.autocancel=e.node.autocycle>-1,e.node.fade=e.node.autopause>400,e.node.nub='false',!0):(o.includes(n)&&0!=d.length&&d.forEach((s=>{t.includes(s.split(':')[0])&&(t=>{const s=Boolean(t.match(/color:/i))?/color[^&]*?;/i:Boolean(t.match(/font:/i))?/font[^&]*?;/i:Boolean(t.match(/padding:/i))?/padding[^&]*?;/i:Boolean(t.match(/top:/i))?/top[^&]*?;/i:Boolean(t.match(/bottom:/i))?/bottom[^&]*?;/i:null;if(!rsc.ignore(s)){const n=String(e.shadowStyle.match(c));if(n){const o=n.replace(s,t.replace(l,':')+';');o&&(e.shadowStyle=e.shadowStyle.replace(n,o))}}})(s)})),!0)};return e.node.nub=a('nub'),e.node.fade=a('fade'),e.node.cache=a('cache'),e.node.trace=a('trace'),e.node.loading=a('loading'),e.node.local=a('local'),e.node.zoom=a('zoom'),e.node.delay=a('delay'),e.node.sur=a('sur'),e.node.sub=a('sub'),e.node.auto=a('auto'),Object.freeze(e.node),e.template=(()=>{if(e.srcRoot)return'undefined';let t=document.getElementById(e.node.local)||null;return rsc.ignore(t)&&(rsc.inspect({type:rsc.notify,notification:r.tagSearch,logtrace:e.node.trace}),t=document.getElementsByTagName('template')[0]||document.getElementsByTagName('noscript')[0]),t||'undefined'})(),!0})()},textList:()=>e.srcRoot||e.template,textArray:()=>{e.imageArray=null,rsc.inspect({type:rsc.notify,notification:r.element+'['+s.id+'] '+rsc.getProperties(e.node),logtrace:e.node.trace});const t=/\s*\n\s*/g,n=()=>e.srcRoot?s.textContent.replace(t,'\n')||null:(()=>{const s='template'!=rsc.elementNode(e.template)?e.template.textContent:e.template.content.textContent;return rsc.ignore(s)?rsc.inspect({type:rsc.error,notification:r.template+' ['+e.node.local+']'}):this.parseText(s).replace(t,'\n')})();return(()=>{const t=n();return!rsc.ignore(t)&&(rsc.inspect({type:rsc.notify,notification:r.markup+'['+(e.srcRoot?s.id+' - '+rsc.fileName(e.src):s.id+' - Node name: '+e.node.local)+']'+rsc.newline+t.replaceAll(e.commaSymbol,'&comma;').replace(/&lt;/g,'<').replace(/&gt;/g,'>'),logtrace:e.node.trace}),e.imageArray=t?t.trim().split('\n'):null,!rsc.ignore(e.imageArray))})()}},this.get={shadow:()=>{const t=document.querySelector('#'+s.id);rsc.clearElement(t),t.attachShadow({mode:'open'}),e.shadow=t.shadowRoot,this.compose.style(),this.compose.body(),e.node.auto||rsc.setSwipe({node:e.shadow.querySelector('div.slideview-body > div.slideview-image')},(t=>{const s=t.action?t.right:t.left;e.slide=e.slide+=s,this.get.slide({shadow:e.shadow})}),{left:-1,right:1})},slide:t=>{rsc.ignore(t.shadow)&&(t.shadow=rsc.ignore(t.node)?e.shadow:(t=>{const s=t.getRootNode().host,n=document.querySelector('#'+s.id).shadowRoot,r=n.querySelector('div.slideview-image > div.active');return e.slide=Number.parseInt(r.id.replace('img',''),10),o.set('left',e.slide-1),o.set('right',e.slide+1),o.set('nub',Number.parseInt(t.id.replace('nub',''),10)),e.slide=o.get(t.className),n})(t.node));const s=t.shadow.querySelectorAll('div.slideview-image > div.slide');e.slide=rsc.ignore(t.autoslide)?e.slide<1?s.length:e.slide>s.length?1:e.slide:t.autoslide;const n=e.slide-1;if(rsc.ignore(s[n]))return;const r=t.shadow.querySelector('div.slideview-image > div.active');r&&r.classList.replace('active','none'),s[n].classList.replace('none','active');const a=t.shadow.querySelector('div.slideview-nub > span.enabled');a&&(a.className='nub'),t.shadow.querySelectorAll('div.slideview-nub > span.nub')[n].className='nub enabled'},view:()=>{const s=()=>{const s=e.shadow.querySelectorAll('div.slideview-image > div.slide'),n=e.node.autocancel&&e.node.autocycle>-1?e.imageArray.length*e.node.autocycle:0;let o=0,r=1;const a=setInterval((()=>{r=r<1?s.length:r>s.length?1:r,(e.node.autocancel?o===n||(r++,o++,0):(r++,0))&&clearInterval(a),t.get.slide({autoslide:r-1})}),e.node.autopause)};setTimeout((()=>{e.node.auto&&setTimeout((()=>{s()}),e.node.delay),t.setDisplay.show()}),e.node.delay),e.node.cache&&(()=>{if(!globalThis.hasOwnProperty('caches'))return;const t=n+'-cache',s=e.srcRoot?e.src.split():Array.from(''),o=[];e.node.cacheimages&&e.imageArray.forEach((e=>{let t=e.split(',');rsc.ignore(t[0])||o.push(t[0].trim())})),rsc.removeDuplcates(o.concat(s.concat(e.cssRoot.concat([import.meta.url])))).forEach((s=>{fetch(s).then((n=>(n.ok||rsc.inspect({type:rsc.warn,notification:r.cache+'['+n.status+'] - '+s,logtrace:e.node.trace}),caches.open(t).then((e=>e.put(s,n))))))}))})(),rsc.inspect({type:rsc.notify,notification:e.shadow,logtrace:e.node.trace})}},this.compose={style:()=>{const t=document.createElement('style');t.className='slideview-style',t.insertAdjacentHTML('beforeend',e.shadowStyle),e.shadow.appendChild(t)},body:()=>{const t=()=>rsc.ignore(l.ar[1])?null:l.ar[1].trim().replaceAll(e.commaSymbol,','),s=()=>rsc.ignore(l.ar[2])?l.index+' / '+e.imageArray.length:l.ar[2].trim().replaceAll(e.commaSymbol,','),n=this.getClassList('slide'),o=e.node.zoom?rsc.ignore(e.node.clickevent)?'ceres.getImage(this);':e.node.clickevent:null,r='ceres.getSlide(this)',a=document.createElement('div');a.className='slideview-body';const i=document.createElement('div');i.className='slideview-image',a.appendChild(i);const c=document.createElement('div');c.className=this.getClassList('slideview-nub'),a.appendChild(c);const l={index:0,ar:[]};e.imageArray.forEach((r=>{l.ar=r.split(',');const a=document.createElement('div');a.className=n,a.id='img'+ ++l.index,i.appendChild(a),e.node.sur&&rsc.composeElement({type:'div',parent:a,markup:e.node.sur?s():null},{class:'surtitle fade'}),rsc.composeElement({type:'img',parent:a},{class:'slide',onclick:o,src:rsc.ignore(l.ar[0])?null:l.ar[0].trim(),alt:t(),loading:Boolean(e.node.loading.match(/lazy|eager|auto/i))?e.node.loading:'auto'}),e.node.sub&&rsc.composeElement({type:'div',parent:a,markup:e.node.sub?t():null},{class:'subtitle fade'})})),rsc.composeElement({type:'a',parent:i,markup:'&#10094;'},{class:this.getClassList('left'),onclick:r}),rsc.composeElement({type:'a',parent:i,markup:'&#10095;'},{class:this.getClassList('right'),onclick:r}),e.imageArray.forEach(((e,t)=>{rsc.composeElement({type:'span',parent:c},{id:'nub'+ ++t,class:'nub',onclick:r})})),e.shadow.appendChild(a)}},this.setDisplay={hide:()=>{s.style.visibility='hidden',s.style.display='none'},show:()=>{s.style.removeProperty('display'),s.style.removeProperty('visibility'),0===s.style.length&&s.removeAttribute('style')}},this.getClassList=t=>'slide'!=t?e.node.nub&&e.node.auto?t+=' none':t:(e.node.zoom&&(t+=' zoom'),e.node.fade&&(t+=' fade'),t+' none'),this.parseFile=t=>{const s=rsc.fileType(e.src,'json')?this.parseJSON(t):rsc.fileType(e.src,'csv')?this.parseJSON(this.parseCSV(t,{json:!0,nodes:['url','sub','sur']})):t;return this.parseText(s)},this.parseText=t=>rsc.softSanitize(t.replace(/\\,|&comma;|&#x2c;|&#44;|U+0002C/g,e.commaSymbol).replace(/^\s*?<template(.*?)>|<\/template>\s*?$/,'')).trim(),this.parseJSON=t=>{const s=JSON.parse(t);let n='';return s.forEach((t=>{n+=t.url+(t.sub?', '+t.sub.replace(e.commaCodes,e.commaSymbol):'')+(t.sur?', '+t.sur.replace(e.commaCodes,e.commaSymbol):'')+'\n'})),n},this.parseCSV=(t,s={})=>{const n=t.split('\n'),o=new Array(n.length),r='_&grp;',a=new RegExp('_&grp;s*?$','g'),i=/"[^]*?",|"[^]*?"$/gm,c=/"\s*?$|"\s*?,\s*?$/,l=/^\s*?"/,d=/""/g,m=/(?!\s)[,](?!\s)/g,p=/,\s*?$/,h=/"/g,u=()=>{let e='';return o.forEach((t=>{rsc.ignore(t)||(e+='{ ',t.split(',').forEach(((t,n)=>{e+=(e=>s.nodes[e]?'"'+s.nodes[e]+'": ':'"node'+e+'1": ')(n)+'"'+t.trim().replace(h,'\\"')+'", '})),e=e.replace(p,'')+' },\n')})),'['+e.replace(p,'')+']'};return n.forEach((t=>{let s=String(t);[...s.matchAll(i)].forEach((t=>{let n=(t=>{let s=String(t).replace(c,'').replace(l,'');return s=s.replace(d,'"'),s.replace(e.commaCodes,e.commaSymbol)+r})(t);s=s.replace(t,n)})),o.push((e=>{let t=e.replace(a,'');return t=t.replaceAll(r,', '),t.replace(m,', ')})(s))})),s.json||s.nodes?u():o.join('\n')},Object.seal(t)}.call(t),t.setDisplay.hide(),e.srcRoot&&this.insertAdjacentHTML('afterbegin',t.parseFile(await(await fetch(e.src)).text()));for(let t of e.cssRoot)e.shadowStyle+=rsc.softSanitize(await(await fetch(t)).text());t.instance.hasContent()&&t.instance.showContent()}});
//# sourceMappingURL=ceres-sv.min.js.map