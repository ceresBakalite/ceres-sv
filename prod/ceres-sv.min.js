/**
 * @license
 * ceres-sv v1.0.0
 *
 * Minified using terser v5.4.0
 * Original file: ceresbakalite/ceres-sv/repos/csvjs/ceres-sv.js
 *
 * ceresBakalite/ceres-sv is licensed under the MIT License - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2020 Alexander Munro
*/
window.ceres={},function(){const e='ceres-sv',t={};(function(){this.srcOpen=function(e){window.open(e.element.getAttribute('src'),e.type)},this.isString=function(e){return'[object String]'==Object.prototype.toString.call(e)},this.clearElement=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},this.composeElement=function(e,t){if(!e.type)return;const r=this.attrib.tag.includes(e.type.trim().toUpperCase())?document.head:e.parent||document.body,i=document.createElement(e.type);Object.entries(t).forEach((([e,t])=>{i.setAttribute(e,t)})),e.markup&&i.insertAdjacentHTML('afterbegin',e.markup),r.appendChild(i)},this.setHorizontalSwipe=function(e,t,r){e.act||(e.act=80),e.node.addEventListener('touchstart',(t=>{e.start=t.changedTouches[0].screenX}),{passive:!0}),e.node.addEventListener('touchmove',(e=>{e.preventDefault()}),{passive:!0}),e.node.addEventListener('touchend',(i=>{e.end=i.changedTouches[0].screenX,Math.abs(e.start-e.end)>e.act&&(r.action=e.start>e.end,t.call(this,r))}),{passive:!0})},this.isEmptyOrNull=function(e){return null===e||'undefined'==e||(this.isString(e)?0===e.length||!e.trim():Array.isArray(e)?0===e.length:e&&e.constructor===Object?0===Object.keys(e).length:!e)},this.getBooleanAttribute=function(e){return!0===e||!1===e?atr:!(this.isEmptyOrNull(e)||!this.isString(e))&&this.attrib.bool.includes(e.trim().toUpperCase())},this.getUniqueElementId=function(e={}){e.name||(e.name='n'),e.range||(e.range=100);for(;document.getElementById(e.el=e.name+Math.floor(Math.random()*e.range)););return e.el},this.removeDuplcates=function(e,t){const r=JSON.stringify;let i=[...new Map(e.map((e=>[r(e),e]))).values()];return t?i.sort(((e,t)=>e-t)):i},this.parseText=function(e){if(this.isEmptyOrNull(e.text))return;if(e.regex||e.text.includes('</template>'))return e.text.replace(this.attrib.markup,'');let t=(new DOMParser).parseFromString(e.text,'text/html');return t.body.textContent||t.body.innerText},this.inspect=function(e){const t=function(e){let t=e.notification+' [ DateTime: '+(new Date).toLocaleString()+' ]';console.error(t),e.alert&&alert(t)},r={[this.attrib.notify]:function(){e.logtrace&&console.info(e.notification)},[this.attrib.warn]:function(){e.logtrace&&console.warn(e.notification)},[this.attrib.reference]:function(){e.logtrace&&console.log('Reference: '+this.attrib.newline+this.attrib.newline+e.reference)},[this.attrib.error]:function(){t({notification:e.notification,alert:e.logtrace})},[this.attrib.default]:function(){t({notification:'Unhandled exception'})}};r[e.type]()||r[this.attrib.default]},this.getObjectProperties=function(e={},t=''){for(let r in e)t+=r+': '+e[r]+', ';return t.replace(/, +$/g,'')},this.attrib={reference:1,notify:2,warn:3,default:98,error:99,bArray:['true','1','enable','confirm','grant','active','on','yes'],tagName:['link','script','style'],isWindows:-1!=navigator.appVersion.indexOf('Win'),nonWordChars:'/()"\':,.;<>~!@#$%^&*|+=[]{}`?-â€¦',whitespace:/\s/g,markup:/(<([^>]+)>)/gi,get newline(){return this.isWindows?'\r\n':'\n'},get bool(){return this.bArray.map((e=>e.trim().toUpperCase()))},get tag(){return this.tagName.map((e=>e.trim().toUpperCase()))},get metaUrl(){return import.meta.url}}}).call(t),window.customElements.get(e)||window.customElements.define(e,class extends HTMLElement{async connectedCallback(){ceres.getImage=function(e){t.srcOpen({element:e,type:'image'})},ceres.getSlide=function(e){i.setSlide(e)},ceres.csvNode=this;const r={},i={};ceres.csvNode.src=ceres.csvNode.getAttribute('src'),r.defaultCSS='https://ceresbakalite.github.io/ceres-sv/prod/ceres-sv.min.css',r.src=t.isEmptyOrNull(ceres.csvNode.src)?null:ceres.csvNode.src.trim(),r.css=ceres.csvNode.getAttribute('css')||r.defaultCSS,r.fetchsrc=!t.isEmptyOrNull(r.src),r.attrib={},r.slide=1,function(){const n=function(e){return!r.attrib.nub||r.attrib.static?e:e+=' none'},a=new Map,s={imageMarkup:'Image list markup ',configAttributes:'The element attributes ',templateSearch:'The '+e+' src attribute url is unavailable. Searching for the fallback template element in the document body',elementSearch:'There is no \'embed\' elementId available. Looking for the first occurance of a <template> or <noscript> tagname',precursorError:'Error: Unable to find the '+e+' document element',fetchListError:'Error: Unable to find either the fetch '+e+' nor the fallback template elements',templateError:'Error: Unable to find the fallback template element when searching the document body',cacheWarning:'Warning: cache response status '};Object.freeze(s),this.setShadow=function(){r.shade=document.querySelector('#'+ceres.csvNode.id),t.clearElement(r.shade),r.shade.attachShadow({mode:'open'}),r.shadow=r.shade.shadowRoot,this.setStyleAttributes(),this.setBodyAttributes(),this.setImageAttributes(),this.setTrackAttributes(),r.shadow.append(r.styleContainer),r.shadow.append(r.bodyContainer),r.attrib.static&&t.setHorizontalSwipe({node:r.shadow.querySelector('div.slideview-body > div.slideview-image')},i.getSwipeCallback,{left:-1,right:1}),t.inspect({type:t.attrib.notify,notification:r.shade,logtrace:r.attrib.trace})},this.setSlide=function(e,i){t.isEmptyOrNull(i)&&(i=t.isEmptyOrNull(e)?r.shadow:this.getShadow(e));const n=i.querySelectorAll('div.slideview-image > div.view');r.slide=r.slide<1?n.length:r.slide>n.length?1:r.slide;const a=r.slide-1;if(t.isEmptyOrNull(n[a]))return;const s=i.querySelector('div.slideview-image > div.active');s&&(s.className=s.className.replace('active','none')),n[a].className=n[a].className.replace('none','active');const c=i.querySelector('div.slideview-nub > span.enabled');c&&(c.className='nub'),i.querySelectorAll('div.slideview-nub > span.nub')[a].className='nub enabled'},this.setAuto=function(){const e=r.attrib.autocancel&&r.attrib.autocycle>-1?r.imageArray.length*r.attrib.autocycle:0;let t=0===e?0:1,n=setInterval((function(){(r.attrib.autocancel?t===e||(r.slide++,t++,0):(r.slide++,0))&&clearInterval(n),i.setSlide()}),r.attrib.autopause)},this.setView=function(){setTimeout((function(){r.bodyContainer.style.display='block',r.attrib.static||setTimeout((function(){i.setAuto()}),r.attrib.delay)}),r.attrib.delay),r.attrib.cache&&this.insertCache()},this.hasProperties=function(){return this.getPrecursor()?r.fetchsrc||r.template?this.attributesExist():t.inspect({type:t.attrib.error,notification:s.fetchListError}):t.inspect({type:t.attrib.error,notification:s.precursorError})},this.activate=function(){this.setShadow(),this.setSlide(),this.setView()},this.setStyleAttributes=function(){r.styleContainer=document.createElement('style'),r.styleContainer.id=e+'-style',r.styleContainer.className='slideview-style',r.shade.appendChild(r.styleContainer),r.cachecss=t.removeDuplcates(r.css.trim().replace(/,/gi,';').replace(/;+$/g,'').replace(/[^\x00-\xFF]| /g,'').split(';')),r.cachecss.forEach((e=>{fetch(e).then((e=>e.text())).then((e=>{r.styleContainer.insertAdjacentHTML('beforeend',e)}))}))},this.setBodyAttributes=function(){r.bodyContainer=document.createElement('div'),r.bodyContainer.id=e+'-body',r.bodyContainer.className='slideview-body',r.bodyContainer.style.display='none',r.shade.appendChild(r.bodyContainer)},this.setImageAttributes=function(i=0){const a=function(){return t.isEmptyOrNull(o[1])?null:o[1].trim()},s=function(e='view'){return r.attrib.zoom&&(e+=' zoom'),r.attrib.fade&&(e+=' fade'),e+' none'}(),c=document.createElement('div');c.id=e+'-image',c.className='slideview-image',r.bodyContainer.appendChild(c);for(let e=0;e<r.imageArray.length;e++){var o=r.imageArray[e].split(',');let n=document.createElement('div');n.id='img'+ ++i,n.className=s,c.appendChild(n),r.attrib.sur&&t.composeElement({type:'div',parent:n,markup:r.attrib.sur?i+' / '+r.imageArray.length:null},{class:'surtitle'}),t.composeElement({type:'img',parent:n},{class:'slide',onclick:r.attrib.zoom?'ceres.getImage(this);':'javascript:void(0);',src:t.isEmptyOrNull(o[0])?null:o[0].trim(),alt:a()}),r.attrib.sub&&t.composeElement({type:'div',parent:n,markup:r.attrib.sub?a():null},{class:'subtitle'})}t.composeElement({type:'a',parent:c,markup:'&#10094;'},{class:n('left'),onclick:'ceres.getSlide(this)'}),t.composeElement({type:'a',parent:c,markup:'&#10095;'},{class:n('right'),onclick:'ceres.getSlide(this)'})},this.setTrackAttributes=function(i=0){const a=document.createElement('div');a.id=e+'-nub',a.className=n('slideview-nub'),r.bodyContainer.appendChild(a);for(let e=0;e<r.imageArray.length;e++)t.composeElement({type:'span',parent:a},{id:'nub'+ ++i,class:'nub',onclick:'ceres.getSlide(this)'})},this.parseJSON=function(e,t=''){return'.json'!=r.src.substring(r.src.lastIndexOf('.'),r.src.length)?e:(JSON.parse(e).forEach((e=>{t+=e.url+', '+e.text+'\n'})),t)},this.insertCache=function(){'caches'in window&&(r.cachesrc=r.fetchsrc?r.src.split():Array.from(''),t.removeDuplcates(r.cachesrc.concat(r.cachecss.concat([t.attrib.metaUrl]))).forEach((e=>{fetch(e).then((i=>(i.ok||t.inspect({type:t.attrib.warn,notification:s.cacheWarning+'['+i.status+'] - '+e,logtrace:r.attrib.trace}),caches.open('ceres-sv-cache').then((t=>t.put(e,i))))))})))},this.getSwipeCallback=function(e){const t=e.action?e.right:e.left;r.slide=r.slide+=t,i.setSlide(null,r.shadow)},this.getShadow=function(e){const t=e.getRootNode().host,i=document.querySelector('#'+t.id).shadowRoot,n=i.querySelector('div.slideview-image > div.active');return r.slide=Number.parseInt(n.id.replace('img',''),10),a.set('left',r.slide-1),a.set('right',r.slide+1),a.set('nub',Number.parseInt(e.id.replace('nub',''),10)),r.slide=a.get(e.className),i},this.getPrecursor=function(){const i=!t.isEmptyOrNull(ceres.csvNode);return i&&(ceres.csvNode.id=t.getUniqueElementId({name:e,range:1e3}),ceres.csvNode.setAttribute('class','none'),r.attrib.delay=Number.isInteger(parseInt(ceres.csvNode.getAttribute('delay')))?parseInt(ceres.csvNode.getAttribute('delay')):250,r.attrib.sur=t.getBooleanAttribute(ceres.csvNode.getAttribute('sur')),r.attrib.sub=t.getBooleanAttribute(ceres.csvNode.getAttribute('sub')),r.attrib.trace=t.getBooleanAttribute(ceres.csvNode.getAttribute('trace')),r.attrib.cache=!t.getBooleanAttribute(ceres.csvNode.getAttribute('cache')),r.attrib.fade=!t.getBooleanAttribute(ceres.csvNode.getAttribute('fade')),r.attrib.nub=!t.getBooleanAttribute(ceres.csvNode.getAttribute('nub')),r.attrib.zoom=function(){let e=ceres.csvNode.getAttribute('zoom');return!!t.isEmptyOrNull(e)||t.getBooleanAttribute(e)}(),r.attrib.static=function(){let e=ceres.csvNode.getAttribute('auto');if(t.isEmptyOrNull(e))return!0;let i=e.replace(t.attrib.whitespace,'').split(','),n=i[0];if(!Number.isInteger(parseInt(n))){if(!t.getBooleanAttribute(n))return!0;i.length>1&&i.shift()}return r.attrib.autocycle=Number.isInteger(parseInt(i[0]))?parseInt(i[0]):10,r.attrib.autopause=Number.isInteger(parseInt(i[1]))?parseInt(i[1]):3e3,r.attrib.autocancel=r.attrib.autocycle>-1,r.attrib.fade=r.attrib.autopause>400,r.attrib.nub='false',!1}(),r.attrib.embed=function(){let e=ceres.csvNode.getAttribute('embed');return!t.isEmptyOrNull(e)&&e}(),Object.freeze(r.attrib),r.template=function(){if(r.fetchsrc)return'undefined';let e=r.attrib.embed?document.getElementById(r.attrib.embed):null;return t.isEmptyOrNull(e)&&(t.inspect({type:t.attrib.notify,notification:s.elementSearch,logtrace:r.attrib.trace}),e=document.getElementsByTagName('template')[0]||document.getElementsByTagName('noscript')[0]),t.isEmptyOrNull(e)?'undefined':e}()),i},this.attributesExist=function(){return r.imageArray=null,t.inspect({type:t.attrib.notify,notification:s.configAttributes+'['+ceres.csvNode.id+'] '+t.getObjectProperties(r.attrib),logtrace:r.attrib.trace}),function(){let e=r.fetchsrc?function(){let e=ceres.csvNode.textContent;return t.isEmptyOrNull(e)?null:e}():function(){t.inspect({type:t.attrib.notify,notification:s.templateSearch,logtrace:r.attrib.trace});let e='TEMPLATE'==r.template.tagName?r.template.content.textContent:r.template.textContent;return t.isEmptyOrNull(e)?t.inspect({type:t.attrib.error,notification:s.templateError+' ['+r.attrib.embed+']'}):e}();return t.isEmptyOrNull(e)||(t.inspect({type:t.attrib.notify,notification:s.imageMarkup+'['+(r.fetchsrc?ceres.csvNode.id+' - fetch':r.attrib.embed+' - template')+']'+t.attrib.newline+e,logtrace:r.attrib.trace}),r.imageArray=e?e.trim().replace(/\r\n|\r|\n/gi,';').split(';'):null),!t.isEmptyOrNull(r.imageArray)}()},Object.seal(i)}.call(i),r.fetchsrc&&ceres.csvNode.insertAdjacentHTML('afterbegin',t.parseText({text:i.parseJSON(await(await fetch(r.src)).text())})),i.hasProperties()&&i.activate()}})}();