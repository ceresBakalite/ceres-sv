/**
 * @license
 * ceres-sv v1.0.0
 *
 * Minified using terser v5.5.1
 * Original file: ceresbakalite/ceres-sv/repos/csvjs/ceres-sv.js
 *
 * ceresBakalite/ceres-sv is licensed under the MIT License - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2018 - 2020 Alexander Munro
*/
window.ceres={},(()=>{const e={};(function(){navigator.appVersion.indexOf('Win'),['true','1','enable','confirm','grant','active','on','yes'].map((e=>e.trim().toUpperCase()))}).call(e),window,document,window.customElements.define('ceres-sv',class extends HTMLElement{async connectedCallback(){ceres.getImage=t=>e.srcOpen({element:t,type:'image'}),ceres.getSlide=e=>a.get.slide({node:e});const t=this,o={},a={};t.src=t.getAttribute('src'),o.defaultCSS='https://ceresbakalite.github.io/ceres-sv/prod/ceres-sv.min.css',o.src=e.ignore(t.src)?null:t.src.trim(),o.css=t.getAttribute('css')||o.defaultCSS,o.srcRoot=!e.ignore(o.src),o.commaCodes=/,|&comma;|&#x2c;|&#44;|U+0002C/g,o.commaSymbol='_&c',o.shadowStyle='',o.node={},o.slide=1,o.cssRoot=e.removeDuplcates(o.css.trim().replace(/,/gi,';').replace(/;+$/g,'').replace(/[^\x00-\xFF]| /g,'').split(';')),function(){const n=t.tagName.toLocaleLowerCase(),s=new Map,l={markup:'Image list markup ',element:'The element attributes ',tagSearch:'The '+n+' src attribute url is unavailable and there is no \'local\' elementId. Looking for the first occurance of a <template> or <noscript> tagname',properties:'Error: Unable to find the '+n+' document element',list:'Error: Unable to find either the '+n+' document element nor the fallback local template elements',template:'Error: Unable to find the local fallback template element when searching the document body',cache:'Warning: cache response status '};Object.freeze(l),this.instance={hasContent:()=>a.content.properties()?a.content.textList()?a.content.textArray():e.inspect({type:e.error,notification:l.list}):e.inspect({type:e.error,notification:l.properties}),showContent:()=>{a.get.shadow(),a.get.slide({shadow:o.shadow}),a.get.view()}},this.content={properties:()=>{const a=['color','font','padding','top','bottom'],s=['sub','sur'];return(()=>{if(e.ignore(t))return!1;t.id=e.getUniqueId({name:n,range:1e3});const r=n=>{const l=t.getAttribute(n),r={nub:!e.getBoolean(l),fade:!e.getBoolean(l),cache:!e.getBoolean(l),trace:e.getBoolean(l),loading:l||'auto',local:l||!1,zoom:!!e.ignore(l)||e.getBoolean(l),delay:Number.isInteger(parseInt(l,10))?parseInt(l,10):250};if(r.hasOwnProperty(n))return r[n];if(e.ignore(l))return!1;const i=l.replace(/\s+:\s+/g,':').split(',').map((e=>e.trim())),c='sur'!=n?/.subtitle[^&]*?}/i:/.surtitle[^&]*?}/i,d=i[0];if(!Number.isInteger(parseInt(d))){if(!e.getBoolean(d))return!1;i.length>1&&i.shift()}return'auto'==n?(o.node.autocycle=Number.isInteger(parseInt(i[0]))?parseInt(i[0]):10,o.node.autopause=Number.isInteger(parseInt(i[1]))?parseInt(i[1]):3e3,o.node.autocancel=o.node.autocycle>-1,o.node.fade=o.node.autopause>400,o.node.nub='false',!0):(s.includes(n)&&(0!=i.length&&i.forEach((t=>{a.includes(t.split(':')[0])&&(t=>{const a=Boolean(t.match(/color:/i))?/color[^&]*?;/i:Boolean(t.match(/font:/i))?/font[^&]*?;/i:Boolean(t.match(/padding:/i))?/padding[^&]*?;/i:Boolean(t.match(/top:/i))?/top[^&]*?;/i:Boolean(t.match(/bottom:/i))?/bottom[^&]*?;/i:null;if(!e.ignore(a)){const e=String(o.shadowStyle.match(c));if(e){const n=e.replace(a,t.replace(/(\s+)?:(\s+)?/g,':')+';');n&&(o.shadowStyle=o.shadowStyle.replace(e,n))}}})(t)}))),!0)};return o.node.nub=r('nub'),o.node.fade=r('fade'),o.node.cache=r('cache'),o.node.trace=r('trace'),o.node.loading=r('loading'),o.node.local=r('local'),o.node.zoom=r('zoom'),o.node.delay=r('delay'),o.node.sur=r('sur'),o.node.sub=r('sub'),o.node.auto=r('auto'),Object.freeze(o.node),o.template=(()=>{if(o.srcRoot)return'undefined';let t=document.getElementById(o.node.local)||null;return e.ignore(t)&&(e.inspect({type:e.notify,notification:l.tagSearch,logtrace:o.node.trace}),t=document.getElementsByTagName('template')[0]||document.getElementsByTagName('noscript')[0]),t||'undefined'})(),!0})()},textList:()=>o.srcRoot||o.template,textArray:()=>(o.imageArray=null,e.inspect({type:e.notify,notification:l.element+'['+t.id+'] '+e.getProperties(o.node),logtrace:o.node.trace}),(()=>{const n=o.srcRoot?t.textContent.replace(/\s*\n\s*/g,'\n')||null:(()=>{const t='TEMPLATE'!=o.template.tagName?o.template.textContent:o.template.content.textContent;return e.ignore(t)?e.inspect({type:e.error,notification:l.template+' ['+o.node.local+']'}):a.parseText(t).replace(/\s*\n\s*/g,'\n')})();return!e.ignore(n)&&(e.inspect({type:e.notify,notification:l.markup+'['+(o.srcRoot?t.id+' - '+e.fileName(o.src):o.node.local+' - local template')+']'+e.newline+n.replaceAll(o.commaSymbol,'&comma;').replace(/&lt;/g,'<').replace(/&gt;/g,'>'),logtrace:o.node.trace}),o.imageArray=n?n.trim().split('\n'):null,!e.ignore(o.imageArray))})())},this.get={shadow:()=>{const n=document.querySelector('#'+t.id);e.clearElement(n),n.attachShadow({mode:'open'}),o.shadow=n.shadowRoot,a.compose.style(),a.compose.body(),o.node.auto||e.setSwipe({node:o.shadow.querySelector('div.slideview-body > div.slideview-image')},(e=>{const t=e.action?e.right:e.left;o.slide=o.slide+=t,a.get.slide({shadow:o.shadow})}),{left:-1,right:1})},slide:t=>{e.ignore(t.shadow)&&(t.shadow=e.ignore(t.node)?o.shadow:(e=>{const t=e.getRootNode().host,a=document.querySelector('#'+t.id).shadowRoot,n=a.querySelector('div.slideview-image > div.active');return o.slide=Number.parseInt(n.id.replace('img',''),10),s.set('left',o.slide-1),s.set('right',o.slide+1),s.set('nub',Number.parseInt(e.id.replace('nub',''),10)),o.slide=s.get(e.className),a})(t.node));const a=t.shadow.querySelectorAll('div.slideview-image > div.slide');o.slide=e.ignore(t.autoslide)?o.slide<1?a.length:o.slide>a.length?1:o.slide:t.autoslide;const n=o.slide-1;if(e.ignore(a[n]))return;const l=t.shadow.querySelector('div.slideview-image > div.active');l&&l.classList.replace('active','none'),a[n].classList.replace('none','active');const r=t.shadow.querySelector('div.slideview-nub > span.enabled');r&&(r.className='nub'),t.shadow.querySelectorAll('div.slideview-nub > span.nub')[n].className='nub enabled'},view:()=>{const t=()=>{const e=o.shadow.querySelectorAll('div.slideview-image > div.slide'),t=o.node.autocancel&&o.node.autocycle>-1?o.imageArray.length*o.node.autocycle:0;let n=0,s=1;const l=setInterval((()=>{s=s<1?e.length:s>e.length?1:s,(o.node.autocancel?n===t||(s++,n++,0):(s++,0))&&clearInterval(l),a.get.slide({autoslide:s-1})}),o.node.autopause)};setTimeout((()=>{o.node.auto&&setTimeout((()=>{t()}),o.node.delay),a.setDisplay.show()}),o.node.delay),o.node.cache&&(()=>{if(!window.hasOwnProperty('caches'))return;const t=o.srcRoot?o.src.split():Array.from(''),a=n+'-cache';e.removeDuplcates(t.concat(o.cssRoot.concat([import.meta.url]))).forEach((t=>{fetch(t).then((n=>(n.ok||e.inspect({type:e.warn,notification:l.cache+'['+n.status+'] - '+t,logtrace:o.node.trace}),caches.open(a).then((e=>e.put(t,n))))))}))})(),e.inspect({type:e.notify,notification:o.shadow,logtrace:o.node.trace})}},this.compose={style:()=>{const e=document.createElement('style');e.className='slideview-style',e.insertAdjacentHTML('beforeend',o.shadowStyle),o.shadow.appendChild(e)},body:()=>{const t=()=>e.ignore(m.ar[1])?null:m.ar[1].trim().replaceAll(o.commaSymbol,','),n=()=>e.ignore(m.ar[2])?m.index+' / '+o.imageArray.length:m.ar[2].trim().replaceAll(o.commaSymbol,','),s=a.getClassList('slide'),l=o.node.zoom?'ceres.getImage(this);':'javascript:void(0);',r='ceres.getSlide(this)',i=document.createElement('div');i.className='slideview-body';const c=document.createElement('div');c.className='slideview-image',i.appendChild(c);const d=document.createElement('div');d.className=a.getClassList('slideview-nub'),i.appendChild(d);const m={index:0,ar:[]};for(let a in o.imageArray){m.ar=o.imageArray[a].split(',');const r=document.createElement('div');r.className=s,r.id='img'+ ++m.index,c.appendChild(r),o.node.sur&&e.composeElement({type:'div',parent:r,markup:o.node.sur?n():null},{class:'surtitle fade'}),e.composeElement({type:'img',parent:r},{class:'slide',onclick:l,src:e.ignore(m.ar[0])?null:m.ar[0].trim(),alt:t(),loading:Boolean(o.node.loading.match(/lazy|eager|auto/i))?o.node.loading:'auto'}),o.node.sub&&e.composeElement({type:'div',parent:r,markup:o.node.sub?t():null},{class:'subtitle fade'})}e.composeElement({type:'a',parent:c,markup:'&#10094;'},{class:a.getClassList('left'),onclick:r}),e.composeElement({type:'a',parent:c,markup:'&#10095;'},{class:a.getClassList('right'),onclick:r}),o.imageArray.forEach(((t,o)=>{e.composeElement({type:'span',parent:d},{id:'nub'+o,class:'nub',onclick:r})})),o.shadow.appendChild(i)}},this.setDisplay={hide:()=>{t.style.visibility='hidden',t.style.display='none'},show:()=>{t.style.removeProperty('display'),t.style.removeProperty('visibility'),0===t.style.length&&t.removeAttribute('style')}},this.getClassList=e=>'slide'!=e?o.node.nub&&o.node.auto?e+=' none':e:(o.node.zoom&&(e+=' zoom'),o.node.fade&&(e+=' fade'),e+' none'),this.getFileType=t=>e.fileType(o.src,'json')?a.parseJSON(t):e.fileType(o.src,'csv')?a.parseJSON(a.parseCSV(t,{json:!0,nodes:['url','sub','sur']})):t,this.parseText=t=>e.softSanitize(t.replace(/\\,|&comma;|&#x2c;|&#44;|U+0002C/g,o.commaSymbol).replace(/^\s*?<template(.*?)>|<\/template>\s*?$/,'')),this.parseJSON=e=>{const t=JSON.parse(e);let a='';return t.forEach((e=>{a+=e.url+(e.sub?', '+e.sub.replace(o.commaCodes,o.commaSymbol):'')+(e.sur?', '+e.sur.replace(o.commaCodes,o.commaSymbol):'')+'\n'})),a},this.parseCSV=(t,a={})=>{const n=t.split('\n'),s=new Array(n.length),l='_&grp;',r=new RegExp('_&grp;s*?$','g'),i=/"[^]*?",|"[^]*?"$/gm,c=()=>{const t=/,\s*?$/;let o='';return s.forEach((n=>{e.ignore(n)||(o+='{ ',n.split(',').forEach(((e,t)=>{o+=(e=>a.nodes[e]?'"'+a.nodes[e]+'": ':'"node'+e+'1": ')(t)+'"'+e.trim().replace(/"/g,'\\"')+'", '})),o=o.replace(t,'')+' },\n')})),'['+o.replace(t,'')+']'};return n.forEach((e=>{let t=String(e);[...t.matchAll(i)].forEach((e=>{let a=(e=>{let t=String(e).replace(/"\s*?$|"\s*?,\s*?$/,'').replace(/^\s*?"/,'');return t=t.replace(/""/g,'"'),t.replace(o.commaCodes,o.commaSymbol)+l})(e);t=t.replace(e,a)})),s.push((e=>{let t=e.replace(r,'');return t=t.replaceAll(l,', '),t.replace(/(?!\s)[,](?!\s)/g,', ')})(t))})),a.json||a.nodes?c():s.join('\n')},Object.seal(a)}.call(a),a.setDisplay.hide(),o.srcRoot&&t.insertAdjacentHTML('afterbegin',a.parseText(a.getFileType(await(await fetch(o.src)).text())));for(let t of o.cssRoot)o.shadowStyle+=e.softSanitize(await(await fetch(t)).text());a.instance.hasContent()&&a.instance.showContent()}})}).call(window.ceres);