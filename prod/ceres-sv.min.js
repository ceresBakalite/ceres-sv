/**
 * @license
 * ceres-sv v1.0.0
 *
 * Minified using terser v5.5.1
 * Original file: ceresbakalite/ceres-sv/repos/csvjs/ceres-sv.js
 *
 * ceresBakalite/ceres-sv is licensed under the MIT License - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2018 - 2020 Alexander Munro
*/
globalThis.ceres={},(()=>{const e={};(function(){this.reference=1,this.notify=2,this.warn=3,this.default=98,this.error=99,this.bArray=['true','1','enable','confirm','grant','active','on','yes'],this.elArray=['link','script','style'],this.isWindows=-1!=navigator.appVersion.indexOf('Win'),this.newline=this.isWindows?'\r\n':'\n',this.docHead=this.elArray.map((e=>e.trim().toUpperCase())),this.bool=this.bArray.map((e=>e.trim().toUpperCase())),this.fileType=(e,t)=>e.substring(e.lastIndexOf('.')+1,e.length).toUpperCase()===t.toUpperCase(),this.fileName=e=>e.substring(e.lastIndexOf('/')+1,e.length),this.fileExt=e=>e.substring(e.lastIndexOf('.')+1,e.length),this.videoType=e=>this.video.get(this.fileExt(e).toLowerCase()),this.clearElement=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},this.elementName=e=>e.nodeName.toLocaleLowerCase(),this.srcOpen=e=>globalThis.open(e.element.getAttribute('src'),e.type),this.isString=e=>'[object String]'==Object.prototype.toString.call(e),this.video=new Map,this.video.set('mp4','video/mp4'),this.video.set('m4v','video/m4v'),this.video.set('ogg','video/ogg'),this.video.set('ogv','video/ogg'),this.video.set('webm','video/webm'),this.composeElement=(e,t)=>{if(this.ignore(e.nodeType))return;const o=this.docHead.includes(e.nodeType.trim().toUpperCase())?document.head:e.parent||document.body,n=document.createElement(e.nodeType);Object.entries(t).forEach((([e,t])=>{t&&n.setAttribute(e,t)})),e.markup&&n.insertAdjacentHTML('afterbegin',e.markup),'video'===e.nodeType&&this.composeVideo(n,e.src,e.type),o.appendChild(n)},this.composeVideo=(e,t,o)=>{const n=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting?e.play():e.pause()}))}),{}),s=document.createElement('source');s.setAttribute('src',t),s.setAttribute('type',o),e.appendChild(s),n.observe(e)},this.setSwipe=(e,t,o)=>{e.act||(e.act=80),e.node.addEventListener('touchstart',(t=>{e.start=t.changedTouches[0].screenX}),{passive:!0}),e.node.addEventListener('touchmove',(e=>{e.preventDefault()}),{passive:!0}),e.node.addEventListener('touchend',(n=>{e.end=n.changedTouches[0].screenX,Math.abs(e.start-e.end)>e.act&&(o.action=e.start>e.end,t.call(this,o))}),{passive:!0})},this.ignore=e=>null===e||'undefined'==e||(this.isString(e)?0===e.length||!e.trim():Array.isArray(e)?0===e.length:e&&e.constructor===Object?0===Object.keys(e).length:!e),this.getBoolean=e=>!0===e||!1===e?e:!(this.ignore(e)||!this.isString(e))&&this.bool.includes(e.trim().toUpperCase()),this.getUniqueId=e=>{for(e.name||(e.name='n'),e.range||(e.range=100);document.getElementById(e.el=e.name+Math.floor(Math.random()*e.range)););return e.el},this.removeDuplcates=(e,t)=>{const o=JSON.stringify,n=[...new Map(e.map((e=>[o(e),e]))).values()];return t?n.sort(((e,t)=>e-t)):n},this.softSanitize=(e,t='text/html')=>this.ignore(e)?null:(new DOMParser).parseFromString(e,t).documentElement.textContent.replace(/</g,'&lt;'),this.inspect=e=>{const t=e=>{const t=e.notification+' [ DateTime: '+(new Date).toLocaleString()+' ]';console.error(t),e.alert&&alert(t)},o={[this.notify]:()=>{e.logtrace&&console.info(e.notification)},[this.warn]:()=>{e.logtrace&&console.warn(e.notification)},[this.reference]:()=>{e.logtrace&&console.log('Reference: '+this.newline+this.newline+e.reference)},[this.error]:()=>t({notification:e.notification,alert:e.logtrace}),[this.default]:()=>t({notification:'Unhandled exception'})};o[e.type]()||o[this.default]},this.getProperties=(e={},t='')=>{for(let o in e)t+=o+': '+e[o]+', ';return t.replace(/, +$/g,'')}}).call(e),globalThis.customElements.define('ceres-sv',class extends HTMLElement{async connectedCallback(){ceres.getImage=t=>e.srcOpen({element:t,type:'image'}),ceres.getSlide=e=>o.get.slide({node:e});const t={},o={};var n;(n=this).src=n.getAttribute('src'),t.defaultCSS='https://ceresbakalite.github.io/ceres-sv/prod/ceres-sv.min.css',t.src=e.ignore(n.src)?null:n.src.trim(),t.css=n.getAttribute('css')||t.defaultCSS,t.srcRoot=!e.ignore(t.src),t.commaCodes=/,|&comma;|&#x2c;|&#44;|U+0002C/g,t.commaSymbol='_&c',t.shadowStyle='',t.node={},t.slide=1,t.cssRoot=e.removeDuplcates(t.css.trim().replace(/,/gi,';').replace(/;+$/g,'').replace(/[^\x00-\xFF]| /g,'').split(';')),function(){const s=e.elementName(n),i=new Map,a={markup:'Image list markup ',element:'The element attributes ',nodeSearch:'The '+s+' src attribute url is unavailable and there is no node name. Looking for the first occurance of a <template> or <noscript> tagname',properties:'Error: Unable to find the '+s+' document element',list:'Error: Unable to find either the '+s+' document element nor the fallback local template elements',template:'Error: Unable to find the local fallback template element when searching the document body',cache:'Warning: cache response status '};Object.freeze(a),this.instance={hasContent:()=>this.content.properties()?this.content.textList()?this.content.textArray():e.inspect({type:e.error,notification:a.list}):e.inspect({type:e.error,notification:a.properties}),showContent:()=>{this.get.shadow(),this.get.slide({shadow:t.shadow}),this.get.view()}},this.content={properties:()=>{const o=['color','font','padding','top','bottom'],i=['sub','sur'];return(()=>{if(e.ignore(n))return!1;n.id=e.getUniqueId({name:s,range:1e3});const r=s=>{const a=n.getAttribute(s),r='cache'==s||'zoom'==s,l={nub:!e.getBoolean(a),fade:!e.getBoolean(a),trace:e.getBoolean(a),loading:a||'auto',local:a||!1,delay:Number.isInteger(parseInt(a,10))?parseInt(a,10):250};if(l.hasOwnProperty(s))return l[s];if(!a)return!!r;const c='sur'!=s?/.subtitle[^&]*?}/i:/.surtitle[^&]*?}/i,d=/(\s+)?:(\s+)?/g,m=a.replace(d,':').split(',').map((e=>e.trim())),p=m[0];if(r)return(()=>{if('cache'==s){const o=m.length>1?m[1].includes('image'):p.includes('image')||null,n=p.includes('image')||e.getBoolean(p);return n&&!e.ignore(o)&&(t.node.cacheimages=o),n}if('zoom'==s)return!/^false$/i.test(p)&&(t.node.clickevent=m.length>1?m[1]:/^true$/i.test(p)?null:p,!e.ignore(t.node.clickevent)||e.getBoolean(p))})();if(!Number.isInteger(parseInt(p))){if(!e.getBoolean(p))return!1;m.length>1&&m.shift()}return'auto'==s?(t.node.autocycle=Number.isInteger(parseInt(m[0]))?parseInt(m[0]):10,t.node.autopause=Number.isInteger(parseInt(m[1]))?parseInt(m[1]):3e3,t.node.autocancel=t.node.autocycle>-1,t.node.fade=t.node.autopause>400,t.node.nub='false',!0):(i.includes(s)&&(0!=m.length&&m.forEach((n=>{o.includes(n.split(':')[0])&&(o=>{const n=Boolean(o.match(/color:/i))?/color[^&]*?;/i:Boolean(o.match(/font:/i))?/font[^&]*?;/i:Boolean(o.match(/padding:/i))?/padding[^&]*?;/i:Boolean(o.match(/top:/i))?/top[^&]*?;/i:Boolean(o.match(/bottom:/i))?/bottom[^&]*?;/i:null;if(!e.ignore(n)){const e=String(t.shadowStyle.match(c));if(e){const s=e.replace(n,o.replace(d,':')+';');s&&(t.shadowStyle=t.shadowStyle.replace(e,s))}}})(n)}))),!0)};return t.node.nub=r('nub'),t.node.fade=r('fade'),t.node.cache=r('cache'),t.node.trace=r('trace'),t.node.loading=r('loading'),t.node.local=r('local'),t.node.zoom=r('zoom'),t.node.delay=r('delay'),t.node.sur=r('sur'),t.node.sub=r('sub'),t.node.auto=r('auto'),Object.freeze(t.node),t.template=(()=>{if(t.srcRoot)return'undefined';let o=document.getElementById(t.node.local)||null;return e.ignore(o)&&(e.inspect({type:e.notify,notification:a.nodeSearch,logtrace:t.node.trace}),o=document.getElementsByTagName('template')[0]||document.getElementsByTagName('noscript')[0]),o||'undefined'})(),!0})()},textList:()=>t.srcRoot||t.template,textArray:()=>{t.imageArray=null,e.inspect({type:e.notify,notification:a.element+'['+n.id+'] '+e.getProperties(t.node),logtrace:t.node.trace});const o=/\s*\n\s*/g,s=()=>t.srcRoot?n.textContent.replace(o,'\n')||null:(()=>{const n='template'!=e.elementName(t.template)?t.template.textContent:t.template.content.textContent;return e.ignore(n)?e.inspect({type:e.error,notification:a.template+' ['+t.node.local+']'}):this.parseText(n).replace(o,'\n')})();return(()=>{const o=s();return!e.ignore(o)&&(e.inspect({type:e.notify,notification:a.markup+'['+(t.srcRoot?n.id+' - '+e.fileName(t.src):n.id+' - Node name: '+t.node.local)+']'+e.newline+o.replaceAll(t.commaSymbol,'&comma;').replace(/&lt;/g,'<').replace(/&gt;/g,'>'),logtrace:t.node.trace}),t.imageArray=o?o.trim().split('\n'):null,!e.ignore(t.imageArray))})()}},this.get={shadow:()=>{const o=document.querySelector('#'+n.id);e.clearElement(o),o.attachShadow({mode:'open'}),t.shadow=o.shadowRoot,this.compose.style(),this.compose.body(),t.node.auto||e.setSwipe({node:t.shadow.querySelector('div.slideview-body > div.slideview-image')},(e=>{const o=e.action?e.right:e.left;t.slide=t.slide+=o,this.get.slide({shadow:t.shadow})}),{left:-1,right:1})},slide:o=>{e.ignore(o.shadow)&&(o.shadow=e.ignore(o.node)?t.shadow:(e=>{const o=e.getRootNode().host,n=document.querySelector('#'+o.id).shadowRoot,s=n.querySelector('div.slideview-image > div.active');return t.slide=Number.parseInt(s.id.replace('img',''),10),i.set('left',t.slide-1),i.set('right',t.slide+1),i.set('nub',Number.parseInt(e.id.replace('nub',''),10)),t.slide=i.get(e.className),n})(o.node));const n=o.shadow.querySelectorAll('div.slideview-image > div.slide');t.slide=e.ignore(o.autoslide)?t.slide<1?n.length:t.slide>n.length?1:t.slide:o.autoslide;const s=t.slide-1;if(e.ignore(n[s]))return;const a=o.shadow.querySelector('div.slideview-image > div.active');a&&a.classList.replace('active','none'),n[s].classList.replace('none','active');const r=o.shadow.querySelector('div.slideview-nub > span.enabled');r&&(r.className='nub'),o.shadow.querySelectorAll('div.slideview-nub > span.nub')[s].className='nub enabled'},view:()=>{const n=()=>{const e=t.shadow.querySelectorAll('div.slideview-image > div.slide'),n=t.node.autocancel&&t.node.autocycle>-1?t.imageArray.length*t.node.autocycle:0;let s=0,i=1;const a=setInterval((()=>{i=i<1?e.length:i>e.length?1:i,(t.node.autocancel?s===n||(i++,s++,0):(i++,0))&&clearInterval(a),o.get.slide({autoslide:i-1})}),t.node.autopause)};setTimeout((()=>{t.node.auto&&setTimeout((()=>{n()}),t.node.delay),o.setDisplay.show()}),t.node.delay),t.node.cache&&(()=>{if(!globalThis.hasOwnProperty('caches'))return;const o=s+'-cache',n=t.srcRoot?t.src.split():Array.from(''),i=[];t.node.cacheimages&&t.imageArray.forEach((t=>{let o=t.split(',');e.ignore(o[0])||i.push(o[0].trim())})),e.removeDuplcates(i.concat(n.concat(t.cssRoot.concat([import.meta.url])))).forEach((n=>{fetch(n).then((s=>(s.ok||e.inspect({type:e.warn,notification:a.cache+'['+s.status+'] - '+n,logtrace:t.node.trace}),caches.open(o).then((e=>e.put(n,s))))))}))})(),e.inspect({type:e.notify,notification:t.shadow,logtrace:t.node.trace})}},this.compose={style:()=>{const e=document.createElement('style');e.className='slideview-style',e.insertAdjacentHTML('beforeend',t.shadowStyle),t.shadow.appendChild(e)},body:()=>{const o=()=>e.ignore(m.ar[1])?null:m.ar[1].trim().replaceAll(t.commaSymbol,','),n=()=>e.ignore(m.ar[2])?m.index+' / '+t.imageArray.length:m.ar[2].trim().replaceAll(t.commaSymbol,','),s=()=>e.ignore(m.ar[0])?null:m.ar[0].trim(),i=this.getClassList('slide'),a=t.node.zoom?e.ignore(t.node.clickevent)?'ceres.getImage(this);':t.node.clickevent:null,r='ceres.getSlide(this)',l=document.createElement('div');l.className='slideview-body';const c=document.createElement('div');c.className='slideview-image',l.appendChild(c);const d=document.createElement('div');d.className=this.getClassList('slideview-nub'),l.appendChild(d);const m={index:0,ar:[]};t.imageArray.forEach((r=>{m.ar=r.split(',');const l=document.createElement('div');l.className=i,l.id='img'+ ++m.index,c.appendChild(l),t.node.sur&&e.composeElement({nodeType:'div',parent:l,markup:t.node.sur?n():null},{class:'surtitle fade'}),!e.ignore(m.ar[0])&&e.video.has(e.fileExt(m.ar[0].toLowerCase()))?(l.classList.remove('zoom'),e.composeElement({nodeType:'video',parent:l,src:s(),type:e.videoType(m.ar[0])},{width:'100%',autoplay:!0,loop:!1})):e.composeElement({nodeType:'img',parent:l},{class:'slide',onclick:a,src:s(),alt:o(),loading:Boolean(t.node.loading.match(/lazy|eager|auto/i))?t.node.loading:'auto'}),t.node.sub&&e.composeElement({nodeType:'div',parent:l,markup:t.node.sub?o():null},{class:'subtitle fade'})})),t.imageArray.length>1&&(e.composeElement({nodeType:'a',parent:c,markup:'&#10094;'},{class:this.getClassList('left'),onclick:r}),e.composeElement({nodeType:'a',parent:c,markup:'&#10095;'},{class:this.getClassList('right'),onclick:r})),t.imageArray.forEach(((t,o)=>{e.composeElement({nodeType:'span',parent:d},{id:'nub'+ ++o,class:'nub',onclick:r})})),t.shadow.appendChild(l)}},this.setDisplay={hide:()=>{n.style.visibility='hidden',n.style.display='none'},show:()=>{n.style.removeProperty('display'),n.style.removeProperty('visibility'),0===n.style.length&&n.removeAttribute('style')}},this.getClassList=e=>'slide'!=e?t.node.nub&&t.node.auto?e+=' none':e:(t.node.zoom&&(e+=' zoom'),t.node.fade&&(e+=' fade'),e+' none'),this.parseFile=o=>{const n=e.fileType(t.src,'json')?this.parseJSON(o):e.fileType(t.src,'csv')?this.parseJSON(this.parseCSV(o,{json:!0,nodes:['url','sub','sur']})):o;return this.parseText(n)},this.parseText=o=>e.softSanitize(o.replace(/\\,|&comma;|&#x2c;|&#44;|U+0002C/g,t.commaSymbol).replace(/^\s*?<template(.*?)>|<\/template>\s*?$/,'')).trim(),this.parseJSON=e=>{const o=JSON.parse(e);let n='';return o.forEach((e=>{n+=e.url+(e.sub?', '+e.sub.replace(t.commaCodes,t.commaSymbol):'')+(e.sur?', '+e.sur.replace(t.commaCodes,t.commaSymbol):'')+'\n'})),n},this.parseCSV=(o,n={})=>{const s=o.split('\n'),i=new Array(s.length),a='_&grp;',r=new RegExp('_&grp;s*?$','g'),l=/"[^]*?",|"[^]*?"$/gm,c=/"\s*?$|"\s*?,\s*?$/,d=/^\s*?"/,m=/""/g,p=/(?!\s)[,](?!\s)/g,h=/,\s*?$/,u=/"/g,g=()=>{let t='';return i.forEach((o=>{e.ignore(o)||(t+='{ ',o.split(',').forEach(((e,o)=>{t+=(e=>n.nodes[e]?'"'+n.nodes[e]+'": ':'"node'+e+'1": ')(o)+'"'+e.trim().replace(u,'\\"')+'", '})),t=t.replace(h,'')+' },\n')})),'['+t.replace(h,'')+']'};return s.forEach((e=>{let o=String(e);[...o.matchAll(l)].forEach((e=>{let n=(e=>{let o=String(e).replace(c,'').replace(d,'');return o=o.replace(m,'"'),o.replace(t.commaCodes,t.commaSymbol)+a})(e);o=o.replace(e,n)})),i.push((e=>{let t=e.replace(r,'');return t=t.replaceAll(a,', '),t.replace(p,', ')})(o))})),n.json||n.nodes?g():i.join('\n')},Object.seal(o)}.call(o),o.setDisplay.hide(),t.srcRoot&&this.insertAdjacentHTML('afterbegin',o.parseFile(await(await fetch(t.src)).text()));for(let o of t.cssRoot)t.shadowStyle+=e.softSanitize(await(await fetch(o)).text());o.instance.hasContent()&&o.instance.showContent()}})})();
//# sourceMappingURL=ceres-sv.min.js.map