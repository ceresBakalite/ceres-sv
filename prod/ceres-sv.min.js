/**
 * @license
 * ceres-sv v1.0.0
 *
 * Minified using terser v5.5.1
 * Original file: ceresbakalite/ceres-sv/repos/csvjs/ceres-sv.js
 *
 * ceresBakalite/ceres-sv is licensed under the MIT License - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2018 - 2020 Alexander Munro
*/
window.ceres={},(()=>{const e={};window,document,window.customElements.define('ceres-sv',class extends HTMLElement{get initResource(){}async connectedCallback(){ceres.getImage=t=>e.srcOpen({element:t,type:'image'}),ceres.getSlide=e=>o.get.slide({node:e});const t={},o={};var a;(a=this).src=a.getAttribute('src'),t.defaultCSS='https://ceresbakalite.github.io/ceres-sv/prod/ceres-sv.min.css',t.src=e.ignore(a.src)?null:a.src.trim(),t.css=a.getAttribute('css')||t.defaultCSS,t.srcRoot=!e.ignore(t.src),t.commaCodes=/,|&comma;|&#x2c;|&#44;|U+0002C/g,t.commaSymbol='_&c',t.shadowStyle='',t.node={},t.slide=1,t.cssRoot=e.removeDuplcates(t.css.trim().replace(/,/gi,';').replace(/;+$/g,'').replace(/[^\x00-\xFF]| /g,'').split(';')),function(){const n=a.tagName.toLocaleLowerCase(),s=new Map,i={markup:'Image list markup ',element:'The element attributes ',tagSearch:'The '+n+' src attribute url is unavailable and there is no \'local\' elementId. Looking for the first occurance of a <template> or <noscript> tagname',properties:'Error: Unable to find the '+n+' document element',list:'Error: Unable to find either the '+n+' document element nor the fallback local template elements',template:'Error: Unable to find the local fallback template element when searching the document body',cache:'Warning: cache response status '};Object.freeze(i),this.instance={hasContent:()=>this.content.properties()?this.content.textList()?this.content.textArray():e.inspect({type:e.error,notification:i.list}):e.inspect({type:e.error,notification:i.properties}),showContent:()=>{this.get.shadow(),this.get.slide({shadow:t.shadow}),this.get.view()}},this.content={properties:()=>{const o=['color','font','padding','top','bottom'],s=['sub','sur'];return(()=>{if(e.ignore(a))return!1;a.id=e.getUniqueId({name:n,range:1e3});const l=n=>{const i=a.getAttribute(n),l={nub:!e.getBoolean(i),fade:!e.getBoolean(i),cache:!e.getBoolean(i),trace:e.getBoolean(i),loading:i||'auto',local:i||!1,zoom:!!e.ignore(i)||e.getBoolean(i),delay:Number.isInteger(parseInt(i,10))?parseInt(i,10):250};if(l.hasOwnProperty(n))return l[n];if(e.ignore(i))return!1;const r=i.replace(/\s+:\s+/g,':').split(',').map((e=>e.trim())),c='sur'!=n?/.subtitle[^&]*?}/i:/.surtitle[^&]*?}/i,d=r[0];if(!Number.isInteger(parseInt(d))){if(!e.getBoolean(d))return!1;r.length>1&&r.shift()}return'auto'==n?(t.node.autocycle=Number.isInteger(parseInt(r[0]))?parseInt(r[0]):10,t.node.autopause=Number.isInteger(parseInt(r[1]))?parseInt(r[1]):3e3,t.node.autocancel=t.node.autocycle>-1,t.node.fade=t.node.autopause>400,t.node.nub='false',!0):(s.includes(n)&&(0!=r.length&&r.forEach((a=>{o.includes(a.split(':')[0])&&(o=>{const a=Boolean(o.match(/color:/i))?/color[^&]*?;/i:Boolean(o.match(/font:/i))?/font[^&]*?;/i:Boolean(o.match(/padding:/i))?/padding[^&]*?;/i:Boolean(o.match(/top:/i))?/top[^&]*?;/i:Boolean(o.match(/bottom:/i))?/bottom[^&]*?;/i:null;if(!e.ignore(a)){const e=String(t.shadowStyle.match(c));if(e){const n=e.replace(a,o.replace(/(\s+)?:(\s+)?/g,':')+';');n&&(t.shadowStyle=t.shadowStyle.replace(e,n))}}})(a)}))),!0)};return t.node.nub=l('nub'),t.node.fade=l('fade'),t.node.cache=l('cache'),t.node.trace=l('trace'),t.node.loading=l('loading'),t.node.local=l('local'),t.node.zoom=l('zoom'),t.node.delay=l('delay'),t.node.sur=l('sur'),t.node.sub=l('sub'),t.node.auto=l('auto'),Object.freeze(t.node),t.template=(()=>{if(t.srcRoot)return'undefined';let o=document.getElementById(t.node.local)||null;return e.ignore(o)&&(e.inspect({type:e.notify,notification:i.tagSearch,logtrace:t.node.trace}),o=document.getElementsByTagName('template')[0]||document.getElementsByTagName('noscript')[0]),o||'undefined'})(),!0})()},textList:()=>t.srcRoot||t.template,textArray:()=>{t.imageArray=null,e.inspect({type:e.notify,notification:i.element+'['+a.id+'] '+e.getProperties(t.node),logtrace:t.node.trace});const o=()=>t.srcRoot?a.textContent.replace(/\s*\n\s*/g,'\n')||null:(()=>{const o='TEMPLATE'!=t.template.tagName?t.template.textContent:t.template.content.textContent;return e.ignore(o)?e.inspect({type:e.error,notification:i.template+' ['+t.node.local+']'}):this.parseText(o).replace(/\s*\n\s*/g,'\n')})();return(()=>{const n=o();return!e.ignore(n)&&(e.inspect({type:e.notify,notification:i.markup+'['+(t.srcRoot?a.id+' - '+e.fileName(t.src):t.node.local+' - local template')+']'+e.newline+n.replaceAll(t.commaSymbol,'&comma;').replace(/&lt;/g,'<').replace(/&gt;/g,'>'),logtrace:t.node.trace}),t.imageArray=n?n.trim().split('\n'):null,!e.ignore(t.imageArray))})()}},this.get={shadow:()=>{const o=document.querySelector('#'+a.id);e.clearElement(o),o.attachShadow({mode:'open'}),t.shadow=o.shadowRoot,this.compose.style(),this.compose.body(),t.node.auto||e.setSwipe({node:t.shadow.querySelector('div.slideview-body > div.slideview-image')},(e=>{const o=e.action?e.right:e.left;t.slide=t.slide+=o,this.get.slide({shadow:t.shadow})}),{left:-1,right:1})},slide:o=>{e.ignore(o.shadow)&&(o.shadow=e.ignore(o.node)?t.shadow:(e=>{const o=e.getRootNode().host,a=document.querySelector('#'+o.id).shadowRoot,n=a.querySelector('div.slideview-image > div.active');return t.slide=Number.parseInt(n.id.replace('img',''),10),s.set('left',t.slide-1),s.set('right',t.slide+1),s.set('nub',Number.parseInt(e.id.replace('nub',''),10)),t.slide=s.get(e.className),a})(o.node));const a=o.shadow.querySelectorAll('div.slideview-image > div.slide');t.slide=e.ignore(o.autoslide)?t.slide<1?a.length:t.slide>a.length?1:t.slide:o.autoslide;const n=t.slide-1;if(e.ignore(a[n]))return;const i=o.shadow.querySelector('div.slideview-image > div.active');i&&i.classList.replace('active','none'),a[n].classList.replace('none','active');const l=o.shadow.querySelector('div.slideview-nub > span.enabled');l&&(l.className='nub'),o.shadow.querySelectorAll('div.slideview-nub > span.nub')[n].className='nub enabled'},view:()=>{const a=()=>{const e=t.shadow.querySelectorAll('div.slideview-image > div.slide'),a=t.node.autocancel&&t.node.autocycle>-1?t.imageArray.length*t.node.autocycle:0;let n=0,s=1;const i=setInterval((()=>{s=s<1?e.length:s>e.length?1:s,(t.node.autocancel?n===a||(s++,n++,0):(s++,0))&&clearInterval(i),o.get.slide({autoslide:s-1})}),t.node.autopause)};setTimeout((()=>{t.node.auto&&setTimeout((()=>{a()}),t.node.delay),o.setDisplay.show()}),t.node.delay),t.node.cache&&(()=>{if(!window.hasOwnProperty('caches'))return;const o=t.srcRoot?t.src.split():Array.from(''),a=n+'-cache';e.removeDuplcates(o.concat(t.cssRoot.concat([import.meta.url]))).forEach((o=>{fetch(o).then((n=>(n.ok||e.inspect({type:e.warn,notification:i.cache+'['+n.status+'] - '+o,logtrace:t.node.trace}),caches.open(a).then((e=>e.put(o,n))))))}))})(),e.inspect({type:e.notify,notification:t.shadow,logtrace:t.node.trace})}},this.compose={style:()=>{const e=document.createElement('style');e.className='slideview-style',e.insertAdjacentHTML('beforeend',t.shadowStyle),t.shadow.appendChild(e)},body:()=>{const o=()=>e.ignore(d.ar[1])?null:d.ar[1].trim().replaceAll(t.commaSymbol,','),a=()=>e.ignore(d.ar[2])?d.index+' / '+t.imageArray.length:d.ar[2].trim().replaceAll(t.commaSymbol,','),n=this.getClassList('slide'),s=t.node.zoom?'ceres.getImage(this);':'javascript:void(0);',i='ceres.getSlide(this)',l=document.createElement('div');l.className='slideview-body';const r=document.createElement('div');r.className='slideview-image',l.appendChild(r);const c=document.createElement('div');c.className=this.getClassList('slideview-nub'),l.appendChild(c);const d={index:0,ar:[]};for(let i in t.imageArray){d.ar=t.imageArray[i].split(',');const l=document.createElement('div');l.className=n,l.id='img'+ ++d.index,r.appendChild(l),t.node.sur&&e.composeElement({type:'div',parent:l,markup:t.node.sur?a():null},{class:'surtitle fade'}),e.composeElement({type:'img',parent:l},{class:'slide',onclick:s,src:e.ignore(d.ar[0])?null:d.ar[0].trim(),alt:o(),loading:Boolean(t.node.loading.match(/lazy|eager|auto/i))?t.node.loading:'auto'}),t.node.sub&&e.composeElement({type:'div',parent:l,markup:t.node.sub?o():null},{class:'subtitle fade'})}e.composeElement({type:'a',parent:r,markup:'&#10094;'},{class:this.getClassList('left'),onclick:i}),e.composeElement({type:'a',parent:r,markup:'&#10095;'},{class:this.getClassList('right'),onclick:i}),t.imageArray.forEach(((t,o)=>{e.composeElement({type:'span',parent:c},{id:'nub'+o,class:'nub',onclick:i})})),t.shadow.appendChild(l)}},this.setDisplay={hide:()=>{a.style.visibility='hidden',a.style.display='none'},show:()=>{a.style.removeProperty('display'),a.style.removeProperty('visibility'),0===a.style.length&&a.removeAttribute('style')}},this.getClassList=e=>'slide'!=e?t.node.nub&&t.node.auto?e+=' none':e:(t.node.zoom&&(e+=' zoom'),t.node.fade&&(e+=' fade'),e+' none'),this.getFileType=o=>e.fileType(t.src,'json')?this.parseJSON(o):e.fileType(t.src,'csv')?this.parseJSON(this.parseCSV(o,{json:!0,nodes:['url','sub','sur']})):o,this.parseText=o=>e.softSanitize(o.replace(/\\,|&comma;|&#x2c;|&#44;|U+0002C/g,t.commaSymbol).replace(/^\s*?<template(.*?)>|<\/template>\s*?$/,'')),this.parseJSON=e=>{const o=JSON.parse(e);let a='';return o.forEach((e=>{a+=e.url+(e.sub?', '+e.sub.replace(t.commaCodes,t.commaSymbol):'')+(e.sur?', '+e.sur.replace(t.commaCodes,t.commaSymbol):'')+'\n'})),a},this.parseCSV=(o,a={})=>{const n=o.split('\n'),s=new Array(n.length),i='_&grp;',l=new RegExp('_&grp;s*?$','g'),r=/"[^]*?",|"[^]*?"$/gm,c=()=>{const t=/,\s*?$/;let o='';return s.forEach((n=>{e.ignore(n)||(o+='{ ',n.split(',').forEach(((e,t)=>{o+=(e=>a.nodes[e]?'"'+a.nodes[e]+'": ':'"node'+e+'1": ')(t)+'"'+e.trim().replace(/"/g,'\\"')+'", '})),o=o.replace(t,'')+' },\n')})),'['+o.replace(t,'')+']'};return n.forEach((e=>{let o=String(e);[...o.matchAll(r)].forEach((e=>{let a=(e=>{let o=String(e).replace(/"\s*?$|"\s*?,\s*?$/,'').replace(/^\s*?"/,'');return o=o.replace(/""/g,'"'),o.replace(t.commaCodes,t.commaSymbol)+i})(e);o=o.replace(e,a)})),s.push((e=>{let t=e.replace(l,'');return t=t.replaceAll(i,', '),t.replace(/(?!\s)[,](?!\s)/g,', ')})(o))})),a.json||a.nodes?c():s.join('\n')},Object.seal(o)}.call(o),o.setDisplay.hide(),t.srcRoot&&this.insertAdjacentHTML('afterbegin',o.parseText(o.getFileType(await(await fetch(t.src)).text())));for(let o of t.cssRoot)t.shadowStyle+=e.softSanitize(await(await fetch(o)).text());o.instance.hasContent()&&o.instance.showContent()}})})();