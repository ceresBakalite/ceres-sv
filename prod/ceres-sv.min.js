/**
 * @license
 * ceres-sv v1.0.0
 *
 * Minified using terser v5.3.5
 * Original file: ceresbakalite/ceres-sv/repos/csvjs/ceres-sv.js
 *
 * ceresBakalite/ceres-sv is licensed under the MIT License - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2020 Alexander Munro
*/
const csv="ceres-sv",config=new class{constructor(){}};window,document,window.customElements.get(csv)||window.customElements.define(csv,class extends HTMLElement{"use strict";const;cls=new Map;const;slideIndex=function(t){cls.set("left",config.slide-1),cls.set("right",config.slide+1),cls.set("nub",Number.parseInt(t.id.replace("nub",""),10)),config.slide=cls.get(t.className)};getImage=function(t){rsc.windowOpen({element:t,type:"image"})};getSlide=function(t){setSlide(slideIndex(t))};async connectedCallback(){const t="ceres-csv",e=function(){return attribute};Object.isFrozen(e)||(e.imageMarkup="Image list markup",e.configAttributes="The "+csv+" element attributes after initialisation: ",e.noscriptSearch="The "+csv+" src attribute url is unavailable. Searching for the fallback noscript element in the document body",e.progenitorError="Error: Unable to find the "+csv+" document element",e.imageListError="Error: Unable to find either the callback "+csv+" nor the fallback noscript "+t+" elements",e.noscriptError="Error: Unable to find the "+t+" fallback noscript element when searching the document body",Object.freeze(e),config.defaultCSS="https://ceresbakalite.github.io/ceres-sv/prod/ceres-sv.min.css",config.attributes=function(){return attribute},config.cache=function(){return attribute},config.cache.css=[],config.cache.src=[]);let n=this.getAttribute("css")||config.defaultCSS,i=this.getAttribute("src")||null;config.progenitor=this,config.fetchcss=!r.isEmptyOrNull(n),config.callback=!r.isEmptyOrNull(i),config.slide=1,config.callback&&this.insertAdjacentHTML("afterbegin",await(await fetch(i)).text()),config.cache.src=config.cache.src.concat(i),(function(){const e=!r.isEmptyOrNull(config.progenitor);return e&&(config.progenitor.id=r.getUniqueElementId(csv),config.noscript=document.getElementById(t)||document.getElementsByTagName("noscript")[0],config.attributes.sur=r.getBooleanAttribute(config.progenitor.getAttribute("sur")),config.attributes.sub=r.getBooleanAttribute(config.progenitor.getAttribute("sub")),config.attributes.trace=r.getBooleanAttribute(config.progenitor.getAttribute("trace")),config.attributes.delay=Number.isInteger(parseInt(config.progenitor.getAttribute("delay")))?parseInt(config.progenitor.getAttribute("delay")):250,config.attributes.cache=!r.getBooleanAttribute(config.progenitor.getAttribute("cache")),config.attributes.nub=!r.getBooleanAttribute(config.progenitor.getAttribute("nub"))),e}()?config.callback||config.noscript?(config.imageArray=null,r.inspect({type:r.constant.notify,notification:e.configAttributes+r.getObjectProperties(config.attributes),logtrace:config.attributes.trace}),function(){let n=config.callback?r.isEmptyOrNull(config.progenitor.textContent)?null:config.progenitor.textContent:function(){r.inspect({type:r.constant.notify,notification:e.noscriptSearch,logtrace:config.attributes.trace});const t=r.isEmptyOrNull(config.noscript)?null:config.noscript.textContent;return r.isEmptyOrNull(t)?r.inspect({type:r.constant.error,notification:e.noscriptError,logtrace:config.attributes.trace}):t}();return r.isEmptyOrNull(n)||(r.inspect({type:r.constant.notify,notification:e.imageMarkup+" ["+(config.callback?csv+" - callback":t+" - noscript")+"]:"+r.constant.newline+n,logtrace:config.attributes.trace}),config.imageArray=n?n.trim().replace(/\r\n|\r|\n/gi,";").split(";"):null),Object.isSealed(config)||Object.seal(config),!r.isEmptyOrNull(config.imageArray)}()):r.inspect({type:r.constant.error,notification:e.imageListError,logtrace:config.attributes.trace}):r.inspect({type:r.constant.error,notification:e.progenitorError,logtrace:config.attributes.trace}))&&(config.progenitor.style.display="none",function(){let t=function(){return r.isEmptyOrNull(c[1])?null:c[1].trim()};r.clearElement(config.progenitor),config.progenitor.attachShadow({mode:"open"});const e=document.createElement("style");e.id=csv+"-style",e.className="slideview-style",config.progenitor.appendChild(e),fetch(config.defaultCSS).then((t=>t.text())).then((t=>{e.insertAdjacentHTML("afterbegin",t)}));const n=document.createElement("div");n.id=csv+"-body",n.className="slideview-body",n.style.display="none",config.progenitor.appendChild(n);const i=document.createElement("div");i.id=csv+"-image",i.className="slideview-image",n.appendChild(i);for(let e=0;e<config.imageArray.length;e++){var c=config.imageArray[e].split(","),s=e+1;let n={surName:csv+"-sur"+s,imgName:csv+"-img"+s,subName:csv+"-sub"+s},o=document.createElement("div");o.className="view fade",i.appendChild(o),config.attributes.sur&&r.composeElement({el:"div",id:n.surName,classValue:"surtitle",parent:o,markup:config.attributes.sur?s+" / "+config.imageArray.length:null}),r.composeElement({el:"img",id:n.imgName,classValue:"slide",parent:o,onClickEvent:"window.getImage(this);",url:r.isEmptyOrNull(c[0])?null:c[0].trim(),accessibility:t()}),config.attributes.sub&&r.composeElement({el:"div",id:n.subName,classValue:"subtitle",parent:o,markup:config.attributes.sub?t():null})}r.composeElement({el:"a",id:csv+"-left",classValue:"left",parent:i,markup:"&#10094;",onClickEvent:"window.getSlide(this)"}),r.composeElement({el:"a",id:csv+"-right",classValue:"right",parent:i,markup:"&#10095;",onClickEvent:"window.getSlide(this)"}),config.attributes.nub&&function(){const t=function(){return"window.getSlide(this)"},e=document.createElement("div");e.id=csv+"-nub",e.className="slideview-nub",n.appendChild(e);for(let n=0;n<config.imageArray.length;n++){var i=n+1;r.composeElement({el:"span",id:"nub"+i,classValue:"nub",parent:e,onClickEvent:t()})}n.appendChild(document.createElement("br"))}(),r.setHorizontalSwipe({act:80,el:"div.slideview-image"},(function(t){const e=t.action?t.right:t.left;o(config.slide=config.slide+=e)}),{left:-1,right:1}),config.progenitor.shadowRoot.append(e),config.progenitor.shadowRoot.append(n),r.inspect({type:r.constant.notify,notification:config.progenitor,logtrace:config.attributes.trace})}(),o(),setTimeout((function(){!function(t){config.progenitor.style.display="block";const e=config.progenitor.shadowRoot;e.querySelectorAll("div.slideview-body, img.slide, #"+config.progenitor.id).forEach((e=>{e.style.display=t}))}("block")}),config.attributes.delay),config.attributes.cache&&function(){const t=csv+"-cache";config.cache.script=[import.meta.url,r.getImportMetaUrl()],c.available&&c.installCache(t,r.removeDuplcates(config.cache.css.concat(config.cache.src.concat(config.cache.script))))}());function o(){const t=config.progenitor.shadowRoot,e=t.querySelectorAll("div.view");config.slide=config.slide<1?e.length:config.slide>e.length?1:config.slide,e.forEach((t=>{t.style.display="none"})),e[config.slide-1].style.display="block",config.attributes.nub&&function(){const e=t.querySelectorAll("span.nub"),n=t.querySelector("span.enabled");n&&(n.className="nub"),e[config.slide-1].className+=" enabled"}()}var r={};(function(){const t=function(){return attribute},e=function(){return attribute},n=new Map;n.set("true",!0),n.set("t",!0),n.set("yes",!0),n.set("y",!0),n.set("1",!0),t.reference=1,t.notify=2,t.default=98,t.error=99,t.isWindows=-1!=navigator.appVersion.indexOf("Win"),t.newline=t.isWindows?"\r\n":"\n",Object.freeze(t),e.inspect="Error: An exception occurred in the inspect method.  The diagnostic argument was empty or null",e.errorhandler="Error: An exception occurred in the errorhandler method.  The error argument was empty or null",e.errordefault="An unexpected error has occurred. The inspection type was missing or invalid",Object.freeze(e),this.constant=t,Object.freeze(this.constant),this.windowOpen=function(t){window.open(t.element.getAttribute("src"),t.type)},this.isString=function(t){return"[object String]"==Object.prototype.toString.call(t)},this.clearElement=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},this.getImportMetaUrl=function(){return import.meta.url},this.setHorizontalSwipe=function(t,e,n){const i=document.querySelector(t.el);t.act||(t.act=10),i.addEventListener("touchstart",(e=>{t.start=e.changedTouches[0].screenX}),{passive:!0}),i.addEventListener("touchmove",(t=>{t.preventDefault()}),{passive:!0}),i.addEventListener("touchend",(i=>{t.end=i.changedTouches[0].screenX,Math.abs(t.start-t.end)>t.act&&(n.action=t.start>t.end,e.call(this,n))}),{passive:!0})},this.composeElement=function(t){const e=document.createElement(t.el);e.id=t.id,t.parent.appendChild(e),t.classValue&&this.composeAttribute({id:e.id,type:"class",value:t.classValue}),t.onClickEvent&&this.composeAttribute({id:e.id,type:"onclick",value:t.onClickEvent}),t.csv&&this.composeAttribute({id:e.id,type:"csv",value:t.csv}),t.url&&this.composeAttribute({id:e.id,type:"src",value:t.url}),t.accessibility&&this.composeAttribute({id:e.id,type:"alt",value:t.accessibility}),t.markup&&document.getElementById(e.id).insertAdjacentHTML("afterbegin",t.markup)},this.composeAttribute=function(t){const e=document.getElementById(t.id);if(e){const n=document.createAttribute(t.type);n.value=t.value,e.setAttributeNode(n)}},this.composeLinkElement=function(t){const e=document.createElement("link");t.rel&&(e.rel=t.rel),t.type&&(e.type=t.type),t.href&&(e.href=t.href),t.as&&(e.as=t.as),t.crossorigin&&(e.crossorigin=t.crossorigin),t.media&&(e.media=t.media),e.addEventListener("load",(function(){}),!1),document.head.appendChild(e)},this.isEmptyOrNull=function(t){return null===t||"undefined"==t||(this.isString(t)?0===t.length||!t.trim():Array.isArray(t)?0===t.length:t&&t.constructor===Object?0===Object.keys(t).length:!t)},this.getBooleanAttribute=function(t,e="en"){if(!0===t||!1===t)return t;if(this.isEmptyOrNull(t))return!1;if(!this.isString(t))return!1;const i=t.trim().toLocaleLowerCase(e);return n.get(i)||!1},this.getUniqueElementId=function(t=null,e=100){let n=null;for(;document.getElementById(n=t+Math.floor(Math.random()*e)););return n},this.removeDuplcates=function(t,e){const n=JSON.stringify;let i=[...new Map(t.map((t=>[n(t),t]))).values()];return e?i.sort(((t,e)=>t-e)):i},this.inspect=function(n){if(this.isEmptyOrNull(n))return this.inspect({type:t.error,notification:e.inspect});const i={[t.notify]:function(){n.logtrace&&console.info(n.notification)},[t.error]:function(){this.errorHandler({notification:n.notification,alert:n.logtrace})},[t.reference]:function(){n.logtrace&&console.log("Reference: "+t.newline+t.newline+n.reference)},[t.default]:function(){this.errorHandler({notification:e.errordefault,alert:n.logtrace})}};return i[n.type]()||i[t.default]},this.errorHandler=function(n){if(this.isEmptyOrNull(n))return this.inspect({type:t.error,notification:e.errorHandler});const i=n.notification+" [ DateTime: "+(new Date).toLocaleString()+" ]";return console.error(i),n.alert&&alert(i),!1},this.getObjectProperties=function(t,e=""){for(let n in t)e+=n+": "+t[n]+", ";return e.replace(/, +$/g,"")}}).call(r);var c={};(function(t){this.available="caches"in window,this.installCache=function(t,e,n="/images/NAVCogs.png"){window.addEventListener("install",(function(n){n.waitUntil(caches.open(t).then((function(t){return t.addAll(e)})))})),window.addEventListener("fetch",(function(e){e.respondWith(caches.match(e.request).then((function(i){return void 0!==i?i:fetch(e.request).then((function(n){let i=n.clone();return caches.open(t).then((function(t){t.put(e.request,i)})),n})).catch((function(){return caches.match(n)}))})))}))}}).call(c)}});